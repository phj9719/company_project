<?xml version="1.0" encoding="utf-8"?>
<FDL version="2.1">
  <Form id="NUB_URINQTY_POP" width="700" height="650" titletext="소변량 입력 팝업" onclick="formClick" onkeyup="fn_openDebugPopup" ondevicebuttonup="NUB_MINUTE_POP_ondevicebuttonup" onload="NUB_MINUTE_POP_onload">
    <Layouts>
      <Layout width="700" height="650" screenid="Tablet">
        <Div id="div_pop_main" taborder="0" left="0" top="0" width="700" height="650" background="#FFFFFF" borderRadius="20px" visible="true" onclick="formClick" text="">
          <Layouts>
            <Layout>
              <Div id="Div01" taborder="4" left="62" top="95" width="210" height="24" background="#ffc000"/>
              <Button id="btn_close" taborder="0" top="4.33%" width="24" height="24" onclick="div_pop_main_btn_close_onclick" edge="url('theme://images/ico_popclose.png') 0px 0px" right="6%"/>
              <Div id="div_left" taborder="1" text="Div01" left="47" top="75" width="247" height="525">
                <Layouts>
                  <Layout>
                    <Static id="sta_min_select" taborder="0" text="소변량(ml) 선택" left="13" top="-10" width="210" height="60" textAlign="center" cssclass="sta_tPopupTitle" visible="true" onclick="formClick" borderRadius="4px"/>
                    <Button id="btn_00" taborder="1" text="0" left="7" top="70" width="100" height="60" cssclass="btn_tSelectNumber" onclick="btn_select_onclick"/>
                    <Button id="btn_05" taborder="2" text="10" left="127" top="70" width="100" height="60" cssclass="btn_tSelectNumber" onclick="btn_select_onclick"/>
                    <Button id="btn_10" taborder="3" text="20" left="7" top="144" width="100" height="60" cssclass="btn_tSelectNumber" onclick="btn_select_onclick"/>
                    <Button id="btn_15" taborder="4" text="30" left="127" top="144" width="100" height="60" cssclass="btn_tSelectNumber" onclick="btn_select_onclick"/>
                    <Button id="btn_20" taborder="5" text="50" left="7" top="219" width="100" height="60" cssclass="btn_tSelectNumber" onclick="btn_select_onclick"/>
                    <Button id="btn_25" taborder="6" text="100" left="127" top="219" width="100" height="60" cssclass="btn_tSelectNumber" onclick="btn_select_onclick"/>
                    <Button id="btn_30" taborder="7" text="150" left="7" top="293" width="100" height="60" cssclass="btn_tSelectNumber" onclick="btn_select_onclick"/>
                    <Button id="btn_35" taborder="8" text="200" left="127" top="293" width="100" height="60" cssclass="btn_tSelectNumber" onclick="btn_select_onclick"/>
                    <Button id="btn_40" taborder="9" text="250" left="7" top="367" width="100" height="60" cssclass="btn_tSelectNumber" onclick="btn_select_onclick"/>
                    <Button id="btn_45" taborder="10" text="300" left="127" top="367" width="100" height="60" cssclass="btn_tSelectNumber" onclick="btn_select_onclick"/>
                    <Button id="btn_50" taborder="11" text="400" left="7" top="441" width="100" height="60" cssclass="btn_tSelectNumber" onclick="btn_select_onclick"/>
                    <Button id="btn_55" taborder="12" text="500" left="127" top="441" width="100" height="60" cssclass="btn_tSelectNumber" onclick="btn_select_onclick"/>
                  </Layout>
                </Layouts>
              </Div>
              <Div id="div_right" taborder="2" text="Div01" left="331" top="75" width="341" height="525">
                <Layouts>
                  <Layout>
                    <Div id="Div01" taborder="17" left="76" top="20" width="210" height="24" background="#ffc000"/>
                    <Static id="sta_min_insert" taborder="0" text="소변량(ml) 입력" left="71" top="-10" width="220" height="60" textAlign="center" cssclass="sta_tPopupTitle" visible="true" onclick="formClick"/>
                    <Button id="btn_7" taborder="1" text="7" left="50" top="292" width="66" height="66" cssclass="btn_tSelectNumber2" onclick="btn_insert_onclick"/>
                    <Button id="btn_8" taborder="2" text="8" left="150" top="292" width="66" height="66" cssclass="btn_tSelectNumber2" onclick="btn_insert_onclick"/>
                    <Button id="btn_4" taborder="3" text="4" left="50" top="216" width="66" height="66" cssclass="btn_tSelectNumber2" onclick="btn_insert_onclick"/>
                    <Button id="btn_5" taborder="4" text="5" left="150" top="216" width="66" height="66" cssclass="btn_tSelectNumber2" onclick="btn_insert_onclick"/>
                    <Button id="btn_1" taborder="5" text="1" left="50" top="140" width="66" height="66" cssclass="btn_tSelectNumber2" onclick="btn_insert_onclick"/>
                    <Button id="btn_2" taborder="6" text="2" left="150" top="140" width="66" height="66" cssclass="btn_tSelectNumber2" onclick="btn_insert_onclick"/>
                    <Button id="btn_erase" taborder="7" text="C" left="250" top="368" width="66" height="66" cssclass="btn_tSelectNumber2" onclick="div_pop_main_div_right_btn_erase_onclick" color="#47afe1"/>
                    <Button id="btn_0" taborder="8" text="0" left="150" top="368" width="66" height="66" cssclass="btn_tSelectNumber2" onclick="btn_insert_onclick"/>
                    <Button id="btn_ok" taborder="9" text="확인" left="50" top="464" width="264" height="50" onclick="div_pop_main_div_right_btn_ok_onclick" background="#47afe1" borderRadius="4px" font="normal 700 20pt/normal &quot;Noto Sans KR&quot;" color="#ffffff"/>
                    <Button id="btn_9" taborder="10" text="9" left="250" top="292" width="66" height="66" cssclass="btn_tSelectNumber2" onclick="btn_insert_onclick"/>
                    <Edit id="edt_value" taborder="11" left="50" top="72" width="180" height="50" readonly="true" font="normal 700 20pt/normal &quot;Noto Sans KR&quot;" color="#000000" textAlign="right"/>
                    <Button id="btn_6" taborder="12" text="6" left="250" top="216" width="66" height="66" cssclass="btn_tSelectNumber2" onclick="btn_insert_onclick"/>
                    <Button id="btn_3" taborder="13" text="3" left="250" top="140" width="66" height="66" cssclass="btn_tSelectNumber2" onclick="btn_insert_onclick"/>
                    <Button id="btn_back" taborder="14" left="250" top="64" width="66" height="66" cssclass="btn_tSelectNumber2" onclick="div_pop_main_div_right_btn_back_onclick" background="url('theme://images/ico_backspace.png') no-repeat center center #f1f1f1"/>
                    <Button id="btn_00" taborder="15" text="00" left="50" top="368" width="66" height="66" cssclass="btn_tSelectNumber2" onclick="btn_insert_onclick"/>
                    <Div id="Div00" taborder="16" left="74" top="26" width="210" height="24"/>
                  </Layout>
                </Layouts>
              </Div>
              <Div id="Div00" taborder="3" left="326" top="80" width="3" background="#47afe1" bottom="60"/>
            </Layout>
          </Layouts>
        </Div>
      </Layout>
    </Layouts>
    <Objects>
      <Dataset id="ds_return" useclientlayout="false">
        <ColumnInfo>
          <Column id="URIN_QTY" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
    </Objects>
    <Script type="xscript5.1"><![CDATA[include "lib::sct_com.xjs";
include "lib::pgm_com.xjs";
include "lib::tpgm_com.xjs";

// 온로드
this.NUB_MINUTE_POP_onload = function(obj:nexacro.Form,e:nexacro.LoadEventInfo)
{
	this.div_pop_main.form.div_right.form.edt_value.set_value("");
};

// 디바이스 버튼
this.NUB_MINUTE_POP_ondevicebuttonup = function(obj:nexacro.Form,e:nexacro.DeviceButtonEventInfo)
{
	// 뒤로가기 버튼
	if (e.button == 2)
	{
		this.close();
	}
};

// X 버튼 (닫기)
this.div_pop_main_btn_close_onclick = function(obj:nexacro.Button,e:nexacro.ClickEventInfo)
{
	this.close();
};

// 소변량 선택
this.btn_select_onclick = function(obj:nexacro.Button,e:nexacro.ClickEventInfo)
{
	this.ds_return.clearData();
	this.ds_return.addRow();
	this.ds_return.setColumn(0, "URIN_QTY", obj.text);
	this.close(this.ds_return.saveXML());
};

// 소변량 입력 숫자들
this.btn_insert_onclick = function(obj:nexacro.Button,e:nexacro.ClickEventInfo)
{
	let iValTemp = "";
	const iVal = this.div_pop_main.form.div_right.form.edt_value.value;
 	const nVal = obj.text;
	
	iValTemp = iVal + nVal;
	
	// 입력 글자 4글자 못 넘도록 하기
	if (iValTemp.length > 4) return;
	
	this.div_pop_main.form.div_right.form.edt_value.set_value(iValTemp);
};

// <- 버튼 (백스페이스)
this.div_pop_main_div_right_btn_back_onclick = function(obj:nexacro.Button,e:nexacro.ClickEventInfo)
{
	const iVal = this.div_pop_main.form.div_right.form.edt_value.value;
	const bVal = iVal.slice(0, -1);
	this.div_pop_main.form.div_right.form.edt_value.set_value(bVal);
};

// C 버튼 (클리어)
this.div_pop_main_div_right_btn_erase_onclick = function(obj:nexacro.Button,e:nexacro.ClickEventInfo)
{
	this.div_pop_main.form.div_right.form.edt_value.set_value("");
};

// 확인
this.div_pop_main_div_right_btn_ok_onclick = function(obj:nexacro.Button,e:nexacro.ClickEventInfo)
{
	const iVal = this.div_pop_main.form.div_right.form.edt_value.value;
	let rtnVal;
	if (iVal.length == 0)
	{
		rtnVal = "";
	}
	else if (iVal.length == 1)
	{
		rtnVal = "0" + iVal;
	}
	else if (iVal.length < 5)
	{
		rtnVal = iVal;
	}
	else
	{
		alert("분입력은 4자리수를 넘을 수 없습니다.");
		return false;
	}
	
	this.ds_return.clearData();
	this.ds_return.addRow();
	this.ds_return.setColumn(0, "URIN_QTY", rtnVal);
	this.close(this.ds_return.saveXML());
};
]]></Script>
  </Form>
</FDL>
