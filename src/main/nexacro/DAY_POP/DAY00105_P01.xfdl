<?xml version="1.0" encoding="utf-8"?>
<FDL version="2.1">
  <Form id="DAY00105_P01" width="740" height="580" titletext="목욕일정입력" onload="form_onload">
    <Layouts>
      <Layout width="740" height="580">
        <Div id="div_cont" taborder="1" left="10" top="10" right="10" bottom="10">
          <Layouts>
            <Layout>
              <Static id="sta_body1" taborder="4" left="3" top="34" height="34" cssclass="sta_WF_DetailLabel02" right="3"/>
              <Static id="sta_head1" taborder="0" text="수급자명" left="1" top="34" width="83" height="34" cssclass="sta_WF_DetailLabel01" textAlign="center"/>
              <Static id="sta_name" taborder="1" left="88" top="38" width="90" height="25" padding="0px 0px 0px 5px"/>
              <Static id="sta_m_code" taborder="2" left="187" top="38" width="100" height="25" padding="0px 0px 0px 5px"/>
              <Static id="sta_body1_01" taborder="5" left="3" top="67" height="34" cssclass="sta_WF_DetailLabel02" right="3" text=""/>
              <Static id="sta_head3" taborder="6" text="성별.생일" left="1" top="67" width="83" height="34" cssclass="sta_WF_DetailLabel01" textAlign="center"/>
              <Static id="sta_body10" taborder="7" left="1" top="106" height="450" cssclass="sta_WF_DetailLabel02" right="3"/>
              <Button id="btn_save" taborder="8" text="저장" top="4" width="70" height="26" onclick="fn_save" right="3" cssclass="btn_save"/>
              <Static id="sta_bdate" taborder="9" left="187" top="71" width="100" height="25" padding="0px 0px 0px 5px"/>
              <Static id="sta_head3_00" taborder="10" text="입 소 일" left="360" top="34" width="83" height="34" cssclass="sta_WF_DetailLabel01" textAlign="center"/>
              <Static id="sta_head4" taborder="11" text="퇴 소 일" left="360" top="67" width="83" height="34" cssclass="sta_WF_DetailLabel01" textAlign="center"/>
              <Static id="sta_sun" taborder="12" text="일요일" left="12" top="145" width="100" height="25" cssclass="sta_WF_DetailLabel02" textAlign="center" background="#ff8080"/>
              <Static id="sta_mon" taborder="13" text="월요일" left="111" top="145" width="100" height="25" cssclass="sta_WF_DetailLabel02" textAlign="center"/>
              <Static id="sta_tue" taborder="14" text="화요일" left="210" top="145" width="100" height="25" cssclass="sta_WF_DetailLabel02" textAlign="center"/>
              <Static id="sta_wed" taborder="15" text="수요일" left="309" top="145" width="100" height="25" cssclass="sta_WF_DetailLabel02" textAlign="center"/>
              <Static id="sta_thu" taborder="16" text="목요일" left="408" top="145" width="100" height="25" cssclass="sta_WF_DetailLabel02" textAlign="center"/>
              <Static id="sta_fri" taborder="17" text="금요일" left="507" top="145" width="100" height="25" cssclass="sta_WF_DetailLabel02" textAlign="center"/>
              <Static id="sta_sat" taborder="18" text="토요일" left="606" top="145" width="100" height="25" cssclass="sta_WF_DetailLabel02" textAlign="center" background="lightblue"/>
              <Static id="sta_m_title" taborder="19" left="289" top="111" height="30" right="291" font="normal bold 15pt/normal &quot;Arial&quot;" textAlign="center"/>
              <Static id="sta_cal_01" taborder="20" left="12" top="169" width="100" height="60" cssclass="sta_WF_DetailLabel02"/>
              <Static id="sta_cal_02" taborder="21" left="111" top="169" width="100" height="60" cssclass="sta_WF_DetailLabel02"/>
              <Static id="sta_cal_003" taborder="22" left="210" top="169" width="100" height="60" cssclass="sta_WF_DetailLabel02"/>
              <Static id="sta_cal_04" taborder="23" left="309" top="169" width="100" height="60" cssclass="sta_WF_DetailLabel02"/>
              <Static id="sta_cal_05" taborder="24" left="408" top="169" width="100" height="60" cssclass="sta_WF_DetailLabel02"/>
              <Static id="sta_cal_06" taborder="25" left="507" top="169" width="100" height="60" cssclass="sta_WF_DetailLabel02"/>
              <Static id="sta_cal_07" taborder="26" left="606" top="169" width="100" height="60" cssclass="sta_WF_DetailLabel02"/>
              <Static id="sta_cal_08" taborder="27" left="12" top="228" width="100" height="60" cssclass="sta_WF_DetailLabel02"/>
              <Static id="sta_cal_09" taborder="28" left="111" top="228" width="100" height="60" cssclass="sta_WF_DetailLabel02"/>
              <Static id="sta_cal_10" taborder="29" left="210" top="228" width="100" height="60" cssclass="sta_WF_DetailLabel02"/>
              <Static id="sta_cal_11" taborder="30" left="309" top="228" width="100" height="60" cssclass="sta_WF_DetailLabel02"/>
              <Static id="sta_cal_12" taborder="31" left="408" top="228" width="100" height="60" cssclass="sta_WF_DetailLabel02"/>
              <Static id="sta_cal_13" taborder="32" left="507" top="228" width="100" height="60" cssclass="sta_WF_DetailLabel02"/>
              <Static id="sta_cal_14" taborder="33" left="606" top="228" width="100" height="60" cssclass="sta_WF_DetailLabel02"/>
              <Static id="sta_cal_15" taborder="34" left="12" top="287" width="100" height="60" cssclass="sta_WF_DetailLabel02"/>
              <Static id="sta_cal_16" taborder="35" left="111" top="287" width="100" height="60" cssclass="sta_WF_DetailLabel02"/>
              <Static id="sta_cal_17" taborder="36" left="210" top="287" width="100" height="60" cssclass="sta_WF_DetailLabel02"/>
              <Static id="sta_cal_18" taborder="37" left="309" top="287" width="100" height="60" cssclass="sta_WF_DetailLabel02"/>
              <Static id="sta_cal_19" taborder="38" left="408" top="287" width="100" height="60" cssclass="sta_WF_DetailLabel02"/>
              <Static id="sta_cal_20" taborder="39" left="507" top="287" width="100" height="60" cssclass="sta_WF_DetailLabel02"/>
              <Static id="sta_cal_21" taborder="40" left="606" top="287" width="100" height="60" cssclass="sta_WF_DetailLabel02"/>
              <Static id="sta_cal_22" taborder="41" left="12" top="346" width="100" height="60" cssclass="sta_WF_DetailLabel02"/>
              <Static id="sta_cal_23" taborder="42" left="111" top="346" width="100" height="60" cssclass="sta_WF_DetailLabel02"/>
              <Static id="sta_cal_24" taborder="43" left="210" top="346" width="100" height="60" cssclass="sta_WF_DetailLabel02"/>
              <Static id="sta_cal_25" taborder="44" left="309" top="346" width="100" height="60" cssclass="sta_WF_DetailLabel02"/>
              <Static id="sta_cal_26" taborder="45" left="408" top="346" width="100" height="60" cssclass="sta_WF_DetailLabel02"/>
              <Static id="sta_cal_27" taborder="46" left="507" top="346" width="100" height="60" cssclass="sta_WF_DetailLabel02"/>
              <Static id="sta_cal_28" taborder="47" left="606" top="346" width="100" height="60" cssclass="sta_WF_DetailLabel02"/>
              <Static id="sta_cal_29" taborder="48" left="12" top="405" width="100" height="60" cssclass="sta_WF_DetailLabel02"/>
              <Static id="sta_cal_30" taborder="49" left="111" top="405" width="100" height="60" cssclass="sta_WF_DetailLabel02"/>
              <Static id="sta_cal_31" taborder="50" left="210" top="405" width="100" height="60" cssclass="sta_WF_DetailLabel02"/>
              <Static id="sta_cal_32" taborder="51" left="309" top="405" width="100" height="60" cssclass="sta_WF_DetailLabel02"/>
              <Static id="sta_cal_33" taborder="52" left="408" top="405" width="100" height="60" cssclass="sta_WF_DetailLabel02"/>
              <Static id="sta_cal_34" taborder="53" left="507" top="405" width="100" height="60" cssclass="sta_WF_DetailLabel02"/>
              <Static id="sta_cal_35" taborder="54" left="606" top="405" width="100" height="60" cssclass="sta_WF_DetailLabel02"/>
              <Static id="sta_cal_36" taborder="55" left="12" top="464" width="100" height="60" cssclass="sta_WF_DetailLabel02"/>
              <Static id="sta_cal_37" taborder="56" left="111" top="464" width="100" height="60" cssclass="sta_WF_DetailLabel02"/>
              <CheckBox id="chk_01" taborder="57" left="17" top="174" width="90" height="50" font="normal bold 15pt/normal &quot;Arial&quot;" cssclass="chk_x" falsevalue="0" truevalue="1" onclick="nalja_check_onclick" canchange="nalja_check_canchange"/>
              <CheckBox id="chk_02" taborder="58" left="116" top="174" width="90" height="50" font="normal bold 15pt/normal &quot;Arial&quot;" cssclass="chk_x" falsevalue="0" truevalue="1" onclick="nalja_check_onclick" canchange="nalja_check_canchange"/>
              <CheckBox id="chk_03" taborder="59" left="215" top="174" width="90" height="50" font="normal bold 15pt/normal &quot;Arial&quot;" cssclass="chk_x" falsevalue="0" truevalue="1" onclick="nalja_check_onclick" canchange="nalja_check_canchange"/>
              <CheckBox id="chk_04" taborder="60" left="314" top="174" width="90" height="50" font="normal bold 15pt/normal &quot;Arial&quot;" cssclass="chk_x" falsevalue="0" truevalue="1" onclick="nalja_check_onclick" canchange="nalja_check_canchange"/>
              <CheckBox id="chk_05" taborder="61" left="413" top="174" width="90" height="50" font="normal bold 15pt/normal &quot;Arial&quot;" cssclass="chk_x" falsevalue="0" truevalue="1" onclick="nalja_check_onclick" canchange="nalja_check_canchange"/>
              <CheckBox id="chk_06" taborder="62" left="512" top="174" width="90" height="50" font="normal bold 15pt/normal &quot;Arial&quot;" cssclass="chk_x" falsevalue="0" truevalue="1" onclick="nalja_check_onclick" canchange="nalja_check_canchange"/>
              <CheckBox id="chk_07" taborder="63" left="611" top="174" width="90" height="50" font="normal bold 15pt/normal &quot;Arial&quot;" cssclass="chk_x" falsevalue="0" truevalue="1" onclick="nalja_check_onclick" canchange="nalja_check_canchange"/>
              <CheckBox id="chk_08" taborder="64" left="17" top="233" width="90" height="50" font="normal bold 15pt/normal &quot;Arial&quot;" cssclass="chk_x" falsevalue="0" truevalue="1" onclick="nalja_check_onclick" canchange="nalja_check_canchange"/>
              <CheckBox id="chk_09" taborder="65" left="116" top="233" width="90" height="50" font="normal bold 15pt/normal &quot;Arial&quot;" cssclass="chk_x" falsevalue="0" truevalue="1" onclick="nalja_check_onclick" canchange="nalja_check_canchange"/>
              <CheckBox id="chk_10" taborder="66" left="215" top="233" width="90" height="50" font="normal bold 15pt/normal &quot;Arial&quot;" cssclass="chk_x" falsevalue="0" truevalue="1" onclick="nalja_check_onclick" canchange="nalja_check_canchange"/>
              <CheckBox id="chk_11" taborder="67" left="314" top="233" width="90" height="50" font="normal bold 15pt/normal &quot;Arial&quot;" cssclass="chk_x" falsevalue="0" truevalue="1" onclick="nalja_check_onclick" canchange="nalja_check_canchange"/>
              <CheckBox id="chk_12" taborder="68" left="413" top="233" width="90" height="50" font="normal bold 15pt/normal &quot;Arial&quot;" cssclass="chk_x" falsevalue="0" truevalue="1" onclick="nalja_check_onclick" canchange="nalja_check_canchange"/>
              <CheckBox id="chk_13" taborder="69" left="512" top="233" width="90" height="50" font="normal bold 15pt/normal &quot;Arial&quot;" cssclass="chk_x" falsevalue="0" truevalue="1" onclick="nalja_check_onclick" canchange="nalja_check_canchange"/>
              <CheckBox id="chk_14" taborder="70" left="611" top="233" width="90" height="50" font="normal bold 15pt/normal &quot;Arial&quot;" cssclass="chk_x" falsevalue="0" truevalue="1" onclick="nalja_check_onclick" canchange="nalja_check_canchange"/>
              <CheckBox id="chk_15" taborder="71" left="17" top="292" width="90" height="50" font="normal bold 15pt/normal &quot;Arial&quot;" cssclass="chk_x" falsevalue="0" truevalue="1" onclick="nalja_check_onclick" canchange="nalja_check_canchange"/>
              <CheckBox id="chk_16" taborder="72" left="116" top="292" width="90" height="50" font="normal bold 15pt/normal &quot;Arial&quot;" cssclass="chk_x" falsevalue="0" truevalue="1" onclick="nalja_check_onclick" canchange="nalja_check_canchange"/>
              <CheckBox id="chk_17" taborder="73" left="215" top="292" width="90" height="50" font="normal bold 15pt/normal &quot;Arial&quot;" cssclass="chk_x" falsevalue="0" truevalue="1" onclick="nalja_check_onclick" canchange="nalja_check_canchange"/>
              <CheckBox id="chk_18" taborder="74" left="314" top="292" width="90" height="50" font="normal bold 15pt/normal &quot;Arial&quot;" cssclass="chk_x" falsevalue="0" truevalue="1" onclick="nalja_check_onclick" canchange="nalja_check_canchange"/>
              <CheckBox id="chk_19" taborder="75" left="413" top="292" width="90" height="50" font="normal bold 15pt/normal &quot;Arial&quot;" cssclass="chk_x" falsevalue="0" truevalue="1" onclick="nalja_check_onclick" canchange="nalja_check_canchange"/>
              <CheckBox id="chk_20" taborder="76" left="512" top="292" width="90" height="50" font="normal bold 15pt/normal &quot;Arial&quot;" cssclass="chk_x" falsevalue="0" truevalue="1" onclick="nalja_check_onclick" canchange="nalja_check_canchange"/>
              <CheckBox id="chk_21" taborder="77" left="611" top="292" width="90" height="50" font="normal bold 15pt/normal &quot;Arial&quot;" cssclass="chk_x" falsevalue="0" truevalue="1" onclick="nalja_check_onclick" canchange="nalja_check_canchange"/>
              <CheckBox id="chk_22" taborder="78" left="17" top="351" width="90" height="50" font="normal bold 15pt/normal &quot;Arial&quot;" cssclass="chk_x" falsevalue="0" truevalue="1" onclick="nalja_check_onclick" canchange="nalja_check_canchange"/>
              <CheckBox id="chk_23" taborder="79" left="116" top="351" width="90" height="50" font="normal bold 15pt/normal &quot;Arial&quot;" cssclass="chk_x" falsevalue="0" truevalue="1" onclick="nalja_check_onclick" canchange="nalja_check_canchange"/>
              <CheckBox id="chk_24" taborder="80" left="215" top="351" width="90" height="50" font="normal bold 15pt/normal &quot;Arial&quot;" cssclass="chk_x" falsevalue="0" truevalue="1" onclick="nalja_check_onclick" canchange="nalja_check_canchange"/>
              <CheckBox id="chk_25" taborder="81" left="314" top="351" width="90" height="50" font="normal bold 15pt/normal &quot;Arial&quot;" cssclass="chk_x" falsevalue="0" truevalue="1" onclick="nalja_check_onclick" canchange="nalja_check_canchange"/>
              <CheckBox id="chk_26" taborder="82" left="413" top="351" width="90" height="50" font="normal bold 15pt/normal &quot;Arial&quot;" cssclass="chk_x" falsevalue="0" truevalue="1" onclick="nalja_check_onclick" canchange="nalja_check_canchange"/>
              <CheckBox id="chk_27" taborder="83" left="512" top="351" width="90" height="50" font="normal bold 15pt/normal &quot;Arial&quot;" cssclass="chk_x" falsevalue="0" truevalue="1" onclick="nalja_check_onclick" canchange="nalja_check_canchange"/>
              <CheckBox id="chk_28" taborder="84" left="611" top="351" width="90" height="50" font="normal bold 15pt/normal &quot;Arial&quot;" cssclass="chk_x" falsevalue="0" truevalue="1" onclick="nalja_check_onclick" canchange="nalja_check_canchange"/>
              <CheckBox id="chk_29" taborder="85" left="17" top="410" width="90" height="50" font="normal bold 15pt/normal &quot;Arial&quot;" cssclass="chk_x" falsevalue="0" truevalue="1" onclick="nalja_check_onclick" canchange="nalja_check_canchange"/>
              <CheckBox id="chk_30" taborder="86" left="116" top="410" width="90" height="50" font="normal bold 15pt/normal &quot;Arial&quot;" cssclass="chk_x" falsevalue="0" truevalue="1" onclick="nalja_check_onclick" canchange="nalja_check_canchange"/>
              <CheckBox id="chk_31" taborder="87" left="215" top="410" width="90" height="50" font="normal bold 15pt/normal &quot;Arial&quot;" cssclass="chk_x" falsevalue="0" truevalue="1" onclick="nalja_check_onclick" canchange="nalja_check_canchange"/>
              <CheckBox id="chk_32" taborder="88" left="314" top="410" width="90" height="50" font="normal bold 15pt/normal &quot;Arial&quot;" cssclass="chk_x" falsevalue="0" truevalue="1" onclick="nalja_check_onclick" canchange="nalja_check_canchange"/>
              <CheckBox id="chk_33" taborder="89" left="413" top="410" width="90" height="50" font="normal bold 15pt/normal &quot;Arial&quot;" cssclass="chk_x" falsevalue="0" truevalue="1" onclick="nalja_check_onclick" canchange="nalja_check_canchange"/>
              <CheckBox id="chk_34" taborder="90" left="512" top="410" width="90" height="50" font="normal bold 15pt/normal &quot;Arial&quot;" cssclass="chk_x" falsevalue="0" truevalue="1" onclick="nalja_check_onclick" canchange="nalja_check_canchange"/>
              <CheckBox id="chk_35" taborder="91" left="611" top="410" width="90" height="50" font="normal bold 15pt/normal &quot;Arial&quot;" cssclass="chk_x" falsevalue="0" truevalue="1" onclick="nalja_check_onclick" canchange="nalja_check_canchange"/>
              <CheckBox id="chk_36" taborder="92" left="17" top="469" width="90" height="50" font="normal bold 15pt/normal &quot;Arial&quot;" cssclass="chk_x" falsevalue="0" truevalue="1" onclick="nalja_check_onclick" canchange="nalja_check_canchange"/>
              <CheckBox id="chk_37" taborder="93" left="116" top="469" width="90" height="50" font="normal bold 15pt/normal &quot;Arial&quot;" cssclass="chk_x" falsevalue="0" truevalue="1" onclick="nalja_check_onclick" canchange="nalja_check_canchange"/>
              <Static id="sta_reday" taborder="94" left="448" top="71" width="100" height="25" padding="0px 0px 0px 5px" color="red"/>
              <Static id="sta_enday" taborder="95" left="448" top="38" width="100" height="25" padding="0px 0px 0px 5px"/>
              <Static id="sta_sex_nm" taborder="3" left="88" top="71" width="35" height="25" padding="0px 0px 0px 5px"/>
              <Static id="sta_count" taborder="96" left="598" top="111" height="30" right="22" font="normal 700/normal &quot;Arial&quot;" textAlign="center"/>
            </Layout>
          </Layouts>
        </Div>
      </Layout>
    </Layouts>
    <Objects>
      <Dataset id="ds_return" useclientlayout="false"/>
      <Dataset id="ds_item" useclientlayout="true">
        <ColumnInfo>
          <Column id="sicode" type="STRING" size="256"/>
          <Column id="aDates" type="STRING" size="256"/>
          <Column id="rnum" type="STRING" size="256"/>
          <Column id="ba_nalja" type="STRING" size="256"/>
          <Column id="dday" type="STRING" size="256"/>
          <Column id="bDates" type="STRING" size="256"/>
          <Column id="ba_code" type="STRING" size="256"/>
          <Column id="ba_name" type="STRING" size="256"/>
          <Column id="ba_cnt" type="STRING" size="256"/>
          <Column id="bShow" type="STRING" size="256"/>
          <Column id="bChk" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="sicode">T22614000050</Col>
            <Col id="aDates">20220401</Col>
          </Row>
          <Row>
            <Col id="sicode">T22614000050</Col>
            <Col id="aDates">20220402</Col>
          </Row>
          <Row/>
        </Rows>
      </Dataset>
      <Dataset id="ds_search">
        <ColumnInfo>
          <Column id="sicode" type="STRING" size="256"/>
          <Column id="m_code" type="STRING" size="256"/>
          <Column id="date_from" type="STRING" size="256"/>
          <Column id="date_to" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row/>
        </Rows>
      </Dataset>
      <Dataset id="ds_head">
        <ColumnInfo>
          <Column id="sicode" type="STRING" size="256"/>
          <Column id="s_nm" type="STRING" size="256"/>
          <Column id="m_group" type="STRING" size="256"/>
          <Column id="m_code" type="STRING" size="256"/>
          <Column id="m_name" type="STRING" size="256"/>
          <Column id="sex_nm" type="STRING" size="256"/>
          <Column id="m_enday" type="STRING" size="256"/>
          <Column id="m_reday" type="STRING" size="256"/>
          <Column id="age" type="STRING" size="256"/>
          <Column id="b_date" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_item_tmp" useclientlayout="true">
        <ColumnInfo>
          <Column id="sicode" type="STRING" size="256"/>
          <Column id="ba_code" type="STRING" size="256"/>
          <Column id="ba_cnt" type="STRING" size="256"/>
          <Column id="dow" type="STRING" size="256"/>
          <Column id="d01" type="STRING" size="256"/>
          <Column id="d02" type="STRING" size="256"/>
          <Column id="d03" type="STRING" size="256"/>
          <Column id="d04" type="STRING" size="256"/>
          <Column id="d05" type="STRING" size="256"/>
          <Column id="d06" type="STRING" size="256"/>
          <Column id="d07" type="STRING" size="256"/>
          <Column id="d08" type="STRING" size="256"/>
          <Column id="d09" type="STRING" size="256"/>
          <Column id="d10" type="STRING" size="256"/>
          <Column id="d11" type="STRING" size="256"/>
          <Column id="d12" type="STRING" size="256"/>
          <Column id="d13" type="STRING" size="256"/>
          <Column id="d14" type="STRING" size="256"/>
          <Column id="d15" type="STRING" size="256"/>
          <Column id="d16" type="STRING" size="256"/>
          <Column id="d17" type="STRING" size="256"/>
          <Column id="d18" type="STRING" size="256"/>
          <Column id="d19" type="STRING" size="256"/>
          <Column id="d20" type="STRING" size="256"/>
          <Column id="d21" type="STRING" size="256"/>
          <Column id="d22" type="STRING" size="256"/>
          <Column id="d23" type="STRING" size="256"/>
          <Column id="d24" type="STRING" size="256"/>
          <Column id="d25" type="STRING" size="256"/>
          <Column id="d26" type="STRING" size="256"/>
          <Column id="d27" type="STRING" size="256"/>
          <Column id="d28" type="STRING" size="256"/>
          <Column id="d29" type="STRING" size="256"/>
          <Column id="d30" type="STRING" size="256"/>
          <Column id="d31" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_days">
        <ColumnInfo>
          <Column id="sicode" type="STRING" size="256"/>
          <Column id="ba_nalja" type="STRING" size="256"/>
          <Column id="ba_code" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
    </Objects>
    <Script type="xscript5.1"><![CDATA[/***********************************************************************
 * 화면ID   	: DAY00105_P01
 * 화면명   	: 목욕일정입력
 * 화면설명 	: 
 * 작성일   	: 2022-05-31
 * 작성자   	: 박영주
 * 수정이력 	:
 ***********************************************************************
 ***********************************************************************
 *     수정일     	수정자   	내용
 *	2022-00-00
 ***********************************************************************
 /***********************************************************************
 * Library Include
 ***********************************************************************/
include "lib::sct_com.xjs";
include "lib::pgm_com.xjs";
/***********************************************************************
 * Form Variables
 ***********************************************************************/
const sicode = this.parent.SICODE;
const m_code = this.parent.M_CODE;
const m_name = this.parent.M_NAME;
const date_from = this.parent.DATE_FROM;
const date_to = this.parent.DATE_TO;
/***********************************************************************
 * Form Event Functions
 ***********************************************************************/
this.form_onload = function(obj:nexacro.Form,e:nexacro.LoadEventInfo)
{
	this.form_onload_com(obj, e, false);

	this.ds_search.setColumn(0,"sicode",sicode);
	this.ds_search.setColumn(0,"m_code",m_code);
	this.ds_search.setColumn(0,"date_from",date_from);
	this.ds_search.setColumn(0,"date_to",date_to);
	
	
	this.fn_search();
	this.fn_searchDetail();
	
	this.fn_draw_cal();
};


this.fn_draw_cal = function()
{
	var m_title = "";
	var tmp = this.ds_search.getColumn(0,"date_from");
	m_title = tmp.substring(0,4) + "년 " + tmp.substring(4,6) + "월";
	this.div_cont.form.sta_m_title.set_text(m_title);
	tmp = this.ds_item.lookup("bChk","1","ba_cnt");
	if (tmp!=undefined) {
		this.div_cont.form.sta_count.set_text("목욕일수 = " + tmp);
	} else { /* 목욕일수 0일 때는 표시 안함 */ }

	for (var i=0; i<this.ds_item.rowcount; i++) {
		var bShow = this.ds_item.getColumn(i,"bShow");
		var chk = this.ds_item.getColumn(i,"bChk");
		var date_str = this.ds_item.getColumn(i,"aDates");
		var dday = this.ds_item.getColumn(i,"dday");

		date_str = date_str.substr(8,2);
		var i_str = i+1+"";
		if (i_str<10) {
			i_str = i_str.padStart(2, '0');
		}
		var chk_comp_name = "chk_"+i_str;
		var chk_comp = this.div_cont.form.components[chk_comp_name];
		if (bShow=='0') {	// 해당월 1일 이전의 안 쓰이는 체크박스 안 보이게
			chk_comp.set_visible(false);
			//this.div_cont.removeChild(chk_comp_name);
			//chk_comp.destroy();
		}
		if (chk=='1') {
			chk_comp.set_value('1');
		}
		
		chk_comp.set_text(dday.padStart(7,' '));
	}
	
	// 해당월의 마지막 날짜 이후의 안 쓰이는 체크박스 안 보이게
	for (var j=this.ds_item.rowcount; j<37; j++) {
		var chk_comp_name = "chk_"+(j+1);
		var chk_comp = this.div_cont.form.components["chk_"+(j+1)];
		chk_comp.set_visible(false);
		//this.div_cont.removeChild(chk_comp_name);
		//chk_comp.destroy();
	}
}


/***********************************************************************
 * Data Transaction Functions
 ************************************************************************/
this.fn_search_pre = function()
{
	return true;
}

this.fn_save_pre = function()
{
	// 모든 체크박스 value를 데이터셋에 반영
	for (var i=0; i<37; i++) {
		var num = (i+1+'').padStart(2,'0');
		var chk_comp = this.div_cont.form.components["chk_"+num];
		if (i>=this.ds_item.rowcount) break;
		this.ds_item.setColumn(i,"bChk", chk_comp.value);
	}

	// 해당월 1일 이전의 행 삭제
	for (var j=0; j<this.ds_item.rowcount; j++) {
		var hrow = this.ds_item.findRow("bShow","0");
		if (hrow==-1) break;
		trace("hrow:" + hrow);
		this.ds_item.deleteRow(hrow);
	}
	
	// 체크된 날만 남김
	for (var k=this.ds_item.rowcount-1; k>=0; k--) {
		var hrow = this.ds_item.findRow("bChk","0");
		if (hrow==-1) break;
		this.ds_item.deleteRow(hrow);
	}
	
	// 데이터 채우기
	for (var m=0; m<this.ds_item.rowcount; m++) {
		var _sicode = this.ds_item.getColumn(m,"sicode");
		if (_sicode!=null && _sicode!='') continue;
		
		var dday = this.ds_item.getColumn(m,"dday");
		var nalja = this.parent.DATE_FROM.substr(0,4) + "-"
				+ this.parent.DATE_FROM.substr(4,2) + "-"
				+ dday.padStart(2,'0');
		this.ds_item.setColumn(m,"sicode",this.parent.SICODE);
		this.ds_item.setColumn(m,"ba_code",this.parent.M_CODE);
		this.ds_item.setColumn(m,"ba_name",this.parent.M_NAME);
		this.ds_item.setColumn(m,"ba_nalja",nalja);
	}
	
	return true;
}

//조회
this.fn_search= function ()
{
	//validation
	if (!this.fn_search_pre()) return;
	
	const svcId = "search";
	const params = "/commonController.do";
	const inDatasets = "input1=ds_search";
	const outDatasets = "ds_head=output1";
	const argument = "method=getList "
				   + "sqlId=DAY00105_P01.DAY00105_P01_DS_HEAD_S ";

	const aSync = false;
	const callbackFunc = "fn_callback";
	Sct.transaction(this, svcId, params, inDatasets, outDatasets, argument, callbackFunc, false, aSync);
};


this.fn_searchDetail = function ()
{
	//validation
	//if (!this.fn_search_pre()) return;
	
	const svcId = "searchDetail";
	const params = "/commonController.do";
	const inDatasets = "input1=ds_search";
	const outDatasets = "ds_item=output1";
	const argument = "method=getList "
				   + "sqlId=DAY00105_P01.DAY00105_P01_DS_ITEM_S ";

	const aSync = false;
	const callbackFunc = "fn_callback";
	Sct.transaction(this, svcId, params, inDatasets, outDatasets, argument, callbackFunc, false, aSync);
};

this.fn_save = function()
{
	// validation
	if (!this.fn_save_pre()) return;

	const svcId = "save";
	const params = "/DAY00105Controller.do";
	const inDatasets = "input1=ds_item";
	const outDatasets = "";
	const argument = "method=save "
				+ "sicode=" + this.parent.SICODE + " "
				+ "m_code=" + this.parent.M_CODE + " "
				+ "date_from=" + this.parent.DATE_FROM + " " 
				+ "date_to=" + this.parent.DATE_TO + " ";

	const callbackFunc = "fn_callback";
	Sct.transaction(this, svcId, params, inDatasets, outDatasets, argument, callbackFunc);
};


//콜백
this.fn_callback = function(strSvcID, nErrorCode, strErrorMsg)
{
	if (nErrorCode == 0) 
	{
		if(strSvcID == "search")
		{
			
		} else if(strSvcID == "save")
		{
			alert("목욕일정 등록완료!");
			this.ds_return.clearData();
			this.ds_return.addColumn("REFRESH", "STRING");
			var nRow = this.ds_return.addRow();
			this.ds_return.setColumn(nRow, "REFRESH", "Y");
			
			this.close(this.ds_return.saveXML());
		}
	}
	else
	{
		this.alert(strErrorMsg);
	}
};

/***********************************************************************                                                                                                                                                                                                                                                       
 * User Functions
 ***********************************************************************/

/***********************************************************************                                                                                                                                                                                                                                  
 * Component Event Functions
 ***********************************************************************/

/***********************************************************************                                                                                                                                                                                                                                  
 * Popup Functions
 ***********************************************************************/
 
// 팝업 콜백
this.fn_popCallback = function (popid, strDs) {
	if(Sct.Util.isEmpty(strDs)) return;
	const objDs = this.gfn_createReturnDs(this, "ds_Return", strDs);
	switch(popid)
	{
	}
}

this.nalja_check_onclick = function(obj:nexacro.CheckBox,e:nexacro.ClickEventInfo)
{	
	var cnt = 0;
	for (var i=0; i<37; i++) {
		var num = (i+1+'').padStart(2,'0');
		var chk_comp = this.div_cont.form.components["chk_"+num];
		
		if (chk_comp.value==1) {
			cnt++;
		}
	}
	if (cnt>0) {
		this.div_cont.form.sta_count.set_text("목욕일수 = " + cnt);
	} else {// 1이다가 0일 때도 화면갱신 필요하므로
		this.div_cont.form.sta_count.set_text("");
	}
};

// 목욕일정 입력은
// 입소일부터 퇴소일 당일까지만 가능. 그 외 불가
this.nalja_check_canchange = function(obj:nexacro.CheckBox,e:nexacro.ChangeEventInfo)
{
	var m_enday = this.ds_head.getColumn(0,"m_enday");	// 입소일
	var m_reday = this.ds_head.getColumn(0,"m_reday");  // 퇴소일
	if (m_reday==null || m_reday=='') {
		m_reday = '21000101';
	}
	
	var date_from = this.ds_search.getColumn(0,"date_from");
	var year_mon = date_from.substr(0,6);
	var dday = obj.text.trim();
	var checkDate = year_mon + dday.padStart(2,'0');

	m_enday = m_enday.replace(/[.]/g,'');	// 점 제거
	m_reday = m_reday.replace(/[.]/g,'');
	
	var enday = new Date(m_enday.substr(0,4),m_enday.substr(4,2)-1,m_enday.substr(6,2));
	var reday = new Date(m_reday.substr(0,4),m_reday.substr(4,2)-1,m_reday.substr(6,2));
	var checkday = new Date(checkDate.substr(0,4),checkDate.substr(4,2)-1,checkDate.substr(6,2));

	if (checkday < enday || checkday > reday) {
		return false;
	} else {
		return true;
	}
};
]]></Script>
    <Bind>
      <BindItem id="item0" compid="div_cont.form.sta_name" propid="text" datasetid="ds_head" columnid="m_name"/>
      <BindItem id="item20" compid="div_cont.form.sta_m_code" propid="text" datasetid="ds_head" columnid="m_code"/>
      <BindItem id="item21" compid="div_cont.form.sta_sex_nm" propid="text" datasetid="ds_head" columnid="sex_nm"/>
      <BindItem id="item39" compid="div_cont.form.sta_bdate" propid="text" datasetid="ds_head" columnid="b_date"/>
      <BindItem id="item2" compid="div_cont.form.sta_reday" propid="text" datasetid="ds_head" columnid="m_reday"/>
      <BindItem id="item3" compid="div_cont.form.sta_enday" propid="text" datasetid="ds_head" columnid="m_enday"/>
    </Bind>
  </Form>
</FDL>
