<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">                                                                                                            
<!--                                                                                                        
	/**                                                                                                       
	 *                                                                                                        
	 * WARNING: Auto create                                                                                   
	 * Template File Version : 1.0                                                                            
	 * Create :2017-07-27 10:11                                                                  
	 *                                                                                                        
	 **/                                                                                                      
	 *================================================================                  
     * 프로그램 ID  : NUA310CT                                                         
     * 프로그램 명     : 배변일지                                                     
     * Description : 고객사별 건강기록일지를 관리
     *================================================================                  
                작성일자         			   |  작성자         |  비고                                    
     *================================================================                  
       2021-06-22     10:11        |  SOOIM     | 최초작성                         

     *================================================================                      
     *  Statement List                                                                        
     *================================================================                      
                                                                                            
     *================================================================                      
-->																											  
<mapper namespace="NUA310CT"> 
	<!--SELECT  -->
	<select id="NUA310CT_DS_HEAD_S" parameterType="java.util.HashMap" resultType="java.util.HashMap">                                                                                                           
		<![CDATA[ 
              SELECT A.COMPANY_CD
					,A.RES_ID
					,A.NAME
					,A.SEX
					,A.BIRTHDAY
					,FLOOR( (CAST(REPLACE(CURRENT_DATE,'-','') AS UNSIGNED) - CAST(REPLACE(A.BIRTHDAY,'-','') AS UNSIGNED)) / 10000 ) AS AGE
					,A.GRADE
					,A.AREA
					,A.LOCATION 
					,CASE WHEN NVL(A.RETIRE_DT,'99991231') >= DATE_FORMAT(CURDATE(),'%Y%m%d')
					      THEN 'N'
					      ELSE 'Y' END AS ENTER_GB
					,A.REG_PGM_ID
					,A.REG_USER
					,(SELECT CU.USER_NM_KOR
						FROM T_CM_USER CU
					   WHERE A.COMPANY_CD = CU.COMPANY_CD
					     AND A.REG_USER = CU.USER_ID) AS REG_USER_NM
					,A.REG_DT
					,A.REG_DT_CURR
					,A.REG_DT_LOC
					,A.REG_IP
					,A.MOD_PGM_ID
					,A.MOD_USER
					,(SELECT CU.USER_NM_KOR
						FROM T_CM_USER CU
					   WHERE A.COMPANY_CD = CU.COMPANY_CD
					     AND A.MOD_USER = CU.USER_ID) AS MOD_USER_NM
					,A.MOD_DT
					,A.MOD_DT_CURR
					,A.MOD_DT_LOC
					,A.MOD_IP
					,ROW_NUMBER() OVER(ORDER BY NAME) ROWNUM
              	FROM T_NU_RESIDENT A
               WHERE 1=1
		]]>
		<if test="COMPANY_CD != '' and COMPANY_CD != null">
                 AND A.COMPANY_CD = #{COMPANY_CD}
        </if>
        <if test="NAME != '' and NAME != null">
                 AND A.NAME LIKE CONCAT('%', #{NAME},'%')
        </if>
        <if test="AREA != '' and AREA != null">
                 AND A.AREA = #{AREA} -- 층
        </if>
        <if test="LOCATION != '' and LOCATION != null">
                 AND A.LOCATION = #{LOCATION} -- 생활실
        </if>
        <if test="RETIRE_YN != '' and RETIRE_YN != null">
				 AND IF((SELECT(TIMESTAMPDIFF(DAY, A.RETIRE_DT, CURDATE()))) > 0 , 'Y', 'N') = #{RETIRE_YN}
		</if>
               ORDER BY ROWNUM ASC, A.ENTER_DT DESC, A.NAME ASC
    </select>
	<select id="NUA310CT_DS_LIST_S" parameterType="java.util.HashMap" resultType="java.util.HashMap">                                                                                                           
            <![CDATA[ 
							  SELECT A.COMPANY_CD
									,A.EXC_DT
									,A.RES_ID
									,(SELECT NR.NAME
										FROM T_NU_RESIDENT NR
									   WHERE A.COMPANY_CD = NR.COMPANY_CD
									     AND A.RES_ID = NR.RES_ID) AS RES_NM
									,(SELECT NR.AREA
										FROM T_NU_RESIDENT NR
									   WHERE A.COMPANY_CD = NR.COMPANY_CD
									     AND A.RES_ID = NR.RES_ID) AS AREA -- 층
									,(SELECT NR.LOCATION
										FROM T_NU_RESIDENT NR
									   WHERE A.COMPANY_CD = NR.COMPANY_CD
									     AND A.RES_ID = NR.RES_ID) AS LOCATION -- 생활실
									,(SELECT NR.BIRTHDAY
										FROM T_NU_RESIDENT NR
									   WHERE A.COMPANY_CD = NR.COMPANY_CD
									     AND A.RES_ID = NR.RES_ID) AS BIRTHDAY
									,(SELECT NR.SEX
										FROM T_NU_RESIDENT NR
									   WHERE A.COMPANY_CD = NR.COMPANY_CD
									     AND A.RES_ID = NR.RES_ID) AS SEX
									,(SELECT CC.REF_SYS_COMP_CD
										FROM T_CM_COMPANY CC
									   WHERE CC.COMPANY_CD = A.COMPANY_CD) AS REF_SYS_COMP_CD
									,(SELECT NR.REF_SYS_RES_ID
										FROM T_NU_RESIDENT NR
									   WHERE A.COMPANY_CD = NR.COMPANY_CD
									     AND A.RES_ID = NR.RES_ID) AS REF_SYS_RES_ID            
									,A.DAY_MANAGER_ID
									,A.DAY_MANAGER_NM
									,A.NIG_MANAGER_ID
									,A.NIG_MANAGER_NM
									,A.EXC_TIME
									,IFNULL(NULLIF(SUBSTRING(A.EXC_TIME,1,2) ,''),'00') AS TM_MIN_00
									,IFNULL(NULLIF(SUBSTRING(A.EXC_TIME,3,2) ,''),'00') AS TM_MIN_01
									,IFNULL(NULLIF(SUBSTRING(A.EXC_TIME,5,2) ,''),'00') AS TM_MIN_02
									,IFNULL(NULLIF(SUBSTRING(A.EXC_TIME,7,2) ,''),'00') AS TM_MIN_03
									,IFNULL(NULLIF(SUBSTRING(A.EXC_TIME,9,2) ,''),'00') AS TM_MIN_04
									,IFNULL(NULLIF(SUBSTRING(A.EXC_TIME,11,2),''),'00') AS TM_MIN_05
									,IFNULL(NULLIF(SUBSTRING(A.EXC_TIME,13,2),''),'00') AS TM_MIN_06
									,IFNULL(NULLIF(SUBSTRING(A.EXC_TIME,15,2),''),'00') AS TM_MIN_07
									,IFNULL(NULLIF(SUBSTRING(A.EXC_TIME,17,2),''),'00') AS TM_MIN_08
									,IFNULL(NULLIF(SUBSTRING(A.EXC_TIME,19,2),''),'00') AS TM_MIN_09
									,IFNULL(NULLIF(SUBSTRING(A.EXC_TIME,21,2),''),'00') AS TM_MIN_10
									,IFNULL(NULLIF(SUBSTRING(A.EXC_TIME,23,2),''),'00') AS TM_MIN_11
									,IFNULL(NULLIF(SUBSTRING(A.EXC_TIME,25,2),''),'00') AS TM_MIN_12
									,IFNULL(NULLIF(SUBSTRING(A.EXC_TIME,27,2),''),'00') AS TM_MIN_13
									,IFNULL(NULLIF(SUBSTRING(A.EXC_TIME,29,2),''),'00') AS TM_MIN_14
									,IFNULL(NULLIF(SUBSTRING(A.EXC_TIME,31,2),''),'00') AS TM_MIN_15
									,IFNULL(NULLIF(SUBSTRING(A.EXC_TIME,33,2),''),'00') AS TM_MIN_16
									,IFNULL(NULLIF(SUBSTRING(A.EXC_TIME,35,2),''),'00') AS TM_MIN_17
									,IFNULL(NULLIF(SUBSTRING(A.EXC_TIME,37,2),''),'00') AS TM_MIN_18
									,IFNULL(NULLIF(SUBSTRING(A.EXC_TIME,39,2),''),'00') AS TM_MIN_19
									,IFNULL(NULLIF(SUBSTRING(A.EXC_TIME,41,2),''),'00') AS TM_MIN_20
									,IFNULL(NULLIF(SUBSTRING(A.EXC_TIME,43,2),''),'00') AS TM_MIN_21
									,IFNULL(NULLIF(SUBSTRING(A.EXC_TIME,45,2),''),'00') AS TM_MIN_22
									,IFNULL(NULLIF(SUBSTRING(A.EXC_TIME,47,2),''),'00') AS TM_MIN_23
									,A.URIN_OBS
									,IF(SUBSTRING(A.URIN_OBS,1,1)=2,2,1) AS F_URIN_00
									,IF(SUBSTRING(A.URIN_OBS,1,1)=3,3,1) AS M_URIN_00
									,IF(SUBSTRING(A.URIN_OBS,2,1)=2,2,1) AS F_URIN_01
									,IF(SUBSTRING(A.URIN_OBS,2,1)=3,3,1) AS M_URIN_01
									,IF(SUBSTRING(A.URIN_OBS,3,1)=2,2,1) AS F_URIN_02
									,IF(SUBSTRING(A.URIN_OBS,3,1)=3,3,1) AS M_URIN_02
									,IF(SUBSTRING(A.URIN_OBS,4,1)=2,2,1) AS F_URIN_03
									,IF(SUBSTRING(A.URIN_OBS,4,1)=3,3,1) AS M_URIN_03
									,IF(SUBSTRING(A.URIN_OBS,5,1)=2,2,1) AS F_URIN_04
									,IF(SUBSTRING(A.URIN_OBS,5,1)=3,3,1) AS M_URIN_04
									,IF(SUBSTRING(A.URIN_OBS,6,1)=2,2,1) AS F_URIN_05
									,IF(SUBSTRING(A.URIN_OBS,6,1)=3,3,1) AS M_URIN_05
									,IF(SUBSTRING(A.URIN_OBS,7,1)=2,2,1) AS F_URIN_06
									,IF(SUBSTRING(A.URIN_OBS,7,1)=3,3,1) AS M_URIN_06
									,IF(SUBSTRING(A.URIN_OBS,8,1)=2,2,1) AS F_URIN_07
									,IF(SUBSTRING(A.URIN_OBS,8,1)=3,3,1) AS M_URIN_07
									,IF(SUBSTRING(A.URIN_OBS,9,1)=2,2,1) AS F_URIN_08
									,IF(SUBSTRING(A.URIN_OBS,9,1)=3,3,1) AS M_URIN_08
									,IF(SUBSTRING(A.URIN_OBS,10,1)=2,2,1) AS F_URIN_09
									,IF(SUBSTRING(A.URIN_OBS,10,1)=3,3,1) AS M_URIN_09
									,IF(SUBSTRING(A.URIN_OBS,11,1)=2,2,1) AS F_URIN_10
									,IF(SUBSTRING(A.URIN_OBS,11,1)=3,3,1) AS M_URIN_10
									,IF(SUBSTRING(A.URIN_OBS,12,1)=2,2,1) AS F_URIN_11
									,IF(SUBSTRING(A.URIN_OBS,12,1)=3,3,1) AS M_URIN_11
									,IF(SUBSTRING(A.URIN_OBS,13,1)=2,2,1) AS F_URIN_12
									,IF(SUBSTRING(A.URIN_OBS,13,1)=3,3,1) AS M_URIN_12
									,IF(SUBSTRING(A.URIN_OBS,14,1)=2,2,1) AS F_URIN_13
									,IF(SUBSTRING(A.URIN_OBS,14,1)=3,3,1) AS M_URIN_13
									,IF(SUBSTRING(A.URIN_OBS,15,1)=2,2,1) AS F_URIN_14
									,IF(SUBSTRING(A.URIN_OBS,15,1)=3,3,1) AS M_URIN_14
									,IF(SUBSTRING(A.URIN_OBS,16,1)=2,2,1) AS F_URIN_15
									,IF(SUBSTRING(A.URIN_OBS,16,1)=3,3,1) AS M_URIN_15
									,IF(SUBSTRING(A.URIN_OBS,17,1)=2,2,1) AS F_URIN_16
									,IF(SUBSTRING(A.URIN_OBS,17,1)=3,3,1) AS M_URIN_16
									,IF(SUBSTRING(A.URIN_OBS,18,1)=2,2,1) AS F_URIN_17
									,IF(SUBSTRING(A.URIN_OBS,18,1)=3,3,1) AS M_URIN_17
									,IF(SUBSTRING(A.URIN_OBS,19,1)=2,2,1) AS F_URIN_18
									,IF(SUBSTRING(A.URIN_OBS,19,1)=3,3,1) AS M_URIN_18
									,IF(SUBSTRING(A.URIN_OBS,20,1)=2,2,1) AS F_URIN_19
									,IF(SUBSTRING(A.URIN_OBS,20,1)=3,3,1) AS M_URIN_19
									,IF(SUBSTRING(A.URIN_OBS,21,1)=2,2,1) AS F_URIN_20
									,IF(SUBSTRING(A.URIN_OBS,21,1)=3,3,1) AS M_URIN_20
									,IF(SUBSTRING(A.URIN_OBS,22,1)=2,2,1) AS F_URIN_21
									,IF(SUBSTRING(A.URIN_OBS,22,1)=3,3,1) AS M_URIN_21
									,IF(SUBSTRING(A.URIN_OBS,23,1)=2,2,1) AS F_URIN_22
									,IF(SUBSTRING(A.URIN_OBS,23,1)=3,3,1) AS M_URIN_22
									,IF(SUBSTRING(A.URIN_OBS,24,1)=2,2,1) AS F_URIN_23
									,IF(SUBSTRING(A.URIN_OBS,24,1)=3,3,1) AS M_URIN_23
									,A.URIN_QTY
									,TRIM(IFNULL(NULLIF(SUBSTRING(A.URIN_QTY,1,4) ,''),'0')) AS URIN_QTY_00
									,TRIM(IFNULL(NULLIF(SUBSTRING(A.URIN_QTY,5,4) ,''),'0')) AS URIN_QTY_01
									,TRIM(IFNULL(NULLIF(SUBSTRING(A.URIN_QTY,9,4) ,''),'0')) AS URIN_QTY_02
									,TRIM(IFNULL(NULLIF(SUBSTRING(A.URIN_QTY,13,4),''),'0')) AS URIN_QTY_03
									,TRIM(IFNULL(NULLIF(SUBSTRING(A.URIN_QTY,17,4),''),'0')) AS URIN_QTY_04
									,TRIM(IFNULL(NULLIF(SUBSTRING(A.URIN_QTY,21,4),''),'0')) AS URIN_QTY_05
									,TRIM(IFNULL(NULLIF(SUBSTRING(A.URIN_QTY,25,4),''),'0')) AS URIN_QTY_06
									,TRIM(IFNULL(NULLIF(SUBSTRING(A.URIN_QTY,29,4),''),'0')) AS URIN_QTY_07
									,TRIM(IFNULL(NULLIF(SUBSTRING(A.URIN_QTY,33,4),''),'0')) AS URIN_QTY_08
									,TRIM(IFNULL(NULLIF(SUBSTRING(A.URIN_QTY,37,4),''),'0')) AS URIN_QTY_09
									,TRIM(IFNULL(NULLIF(SUBSTRING(A.URIN_QTY,41,4),''),'0')) AS URIN_QTY_10
									,TRIM(IFNULL(NULLIF(SUBSTRING(A.URIN_QTY,45,4),''),'0')) AS URIN_QTY_11
									,TRIM(IFNULL(NULLIF(SUBSTRING(A.URIN_QTY,49,4),''),'0')) AS URIN_QTY_12
									,TRIM(IFNULL(NULLIF(SUBSTRING(A.URIN_QTY,53,4),''),'0')) AS URIN_QTY_13
									,TRIM(IFNULL(NULLIF(SUBSTRING(A.URIN_QTY,57,4),''),'0')) AS URIN_QTY_14
									,TRIM(IFNULL(NULLIF(SUBSTRING(A.URIN_QTY,61,4),''),'0')) AS URIN_QTY_15
									,TRIM(IFNULL(NULLIF(SUBSTRING(A.URIN_QTY,65,4),''),'0')) AS URIN_QTY_16
									,TRIM(IFNULL(NULLIF(SUBSTRING(A.URIN_QTY,69,4),''),'0')) AS URIN_QTY_17
									,TRIM(IFNULL(NULLIF(SUBSTRING(A.URIN_QTY,73,4),''),'0')) AS URIN_QTY_18
									,TRIM(IFNULL(NULLIF(SUBSTRING(A.URIN_QTY,77,4),''),'0')) AS URIN_QTY_19
									,TRIM(IFNULL(NULLIF(SUBSTRING(A.URIN_QTY,81,4),''),'0')) AS URIN_QTY_20
									,TRIM(IFNULL(NULLIF(SUBSTRING(A.URIN_QTY,85,4),''),'0')) AS URIN_QTY_21
									,TRIM(IFNULL(NULLIF(SUBSTRING(A.URIN_QTY,89,4),''),'0')) AS URIN_QTY_22
									,TRIM(IFNULL(NULLIF(SUBSTRING(A.URIN_QTY,93,4),''),'0')) AS URIN_QTY_23
									,A.FECES_OBS
									,IF(SUBSTRING(A.FECES_OBS,1,1)=1,1,0) AS N_FECES_00
									,IF(SUBSTRING(A.FECES_OBS,2,1)=1,1,0) AS N_FECES_01
									,IF(SUBSTRING(A.FECES_OBS,3,1)=1,1,0) AS N_FECES_02
									,IF(SUBSTRING(A.FECES_OBS,4,1)=1,1,0) AS N_FECES_03
									,IF(SUBSTRING(A.FECES_OBS,5,1)=1,1,0) AS N_FECES_04
									,IF(SUBSTRING(A.FECES_OBS,6,1)=1,1,0) AS N_FECES_05
									,IF(SUBSTRING(A.FECES_OBS,7,1)=1,1,0) AS N_FECES_06
									,IF(SUBSTRING(A.FECES_OBS,8,1)=1,1,0) AS N_FECES_07
									,IF(SUBSTRING(A.FECES_OBS,9,1)=1,1,0) AS N_FECES_08
									,IF(SUBSTRING(A.FECES_OBS,10,1)=1,1,0) AS N_FECES_09
									,IF(SUBSTRING(A.FECES_OBS,11,1)=1,1,0) AS N_FECES_10
									,IF(SUBSTRING(A.FECES_OBS,12,1)=1,1,0) AS N_FECES_11
									,IF(SUBSTRING(A.FECES_OBS,13,1)=1,1,0) AS N_FECES_12
									,IF(SUBSTRING(A.FECES_OBS,14,1)=1,1,0) AS N_FECES_13
									,IF(SUBSTRING(A.FECES_OBS,15,1)=1,1,0) AS N_FECES_14
									,IF(SUBSTRING(A.FECES_OBS,16,1)=1,1,0) AS N_FECES_15
									,IF(SUBSTRING(A.FECES_OBS,17,1)=1,1,0) AS N_FECES_16
									,IF(SUBSTRING(A.FECES_OBS,18,1)=1,1,0) AS N_FECES_17
									,IF(SUBSTRING(A.FECES_OBS,19,1)=1,1,0) AS N_FECES_18
									,IF(SUBSTRING(A.FECES_OBS,20,1)=1,1,0) AS N_FECES_19
									,IF(SUBSTRING(A.FECES_OBS,21,1)=1,1,0) AS N_FECES_20
									,IF(SUBSTRING(A.FECES_OBS,22,1)=1,1,0) AS N_FECES_21
									,IF(SUBSTRING(A.FECES_OBS,23,1)=1,1,0) AS N_FECES_22
									,IF(SUBSTRING(A.FECES_OBS,24,1)=1,1,0) AS N_FECES_23
									,IF(SUBSTRING(A.FECES_OBS,1,1)=2,2,0) AS L_FECES_00
									,IF(SUBSTRING(A.FECES_OBS,2,1)=2,2,0) AS L_FECES_01
									,IF(SUBSTRING(A.FECES_OBS,3,1)=2,2,0) AS L_FECES_02
									,IF(SUBSTRING(A.FECES_OBS,4,1)=2,2,0) AS L_FECES_03
									,IF(SUBSTRING(A.FECES_OBS,5,1)=2,2,0) AS L_FECES_04
									,IF(SUBSTRING(A.FECES_OBS,6,1)=2,2,0) AS L_FECES_05
									,IF(SUBSTRING(A.FECES_OBS,7,1)=2,2,0) AS L_FECES_06
									,IF(SUBSTRING(A.FECES_OBS,8,1)=2,2,0) AS L_FECES_07
									,IF(SUBSTRING(A.FECES_OBS,9,1)=2,2,0) AS L_FECES_08
									,IF(SUBSTRING(A.FECES_OBS,10,1)=2,2,0) AS L_FECES_09
									,IF(SUBSTRING(A.FECES_OBS,11,1)=2,2,0) AS L_FECES_10
									,IF(SUBSTRING(A.FECES_OBS,12,1)=2,2,0) AS L_FECES_11
									,IF(SUBSTRING(A.FECES_OBS,13,1)=2,2,0) AS L_FECES_12
									,IF(SUBSTRING(A.FECES_OBS,14,1)=2,2,0) AS L_FECES_13
									,IF(SUBSTRING(A.FECES_OBS,15,1)=2,2,0) AS L_FECES_14
									,IF(SUBSTRING(A.FECES_OBS,16,1)=2,2,0) AS L_FECES_15
									,IF(SUBSTRING(A.FECES_OBS,17,1)=2,2,0) AS L_FECES_16
									,IF(SUBSTRING(A.FECES_OBS,18,1)=2,2,0) AS L_FECES_17
									,IF(SUBSTRING(A.FECES_OBS,19,1)=2,2,0) AS L_FECES_18
									,IF(SUBSTRING(A.FECES_OBS,20,1)=2,2,0) AS L_FECES_19
									,IF(SUBSTRING(A.FECES_OBS,21,1)=2,2,0) AS L_FECES_20
									,IF(SUBSTRING(A.FECES_OBS,22,1)=2,2,0) AS L_FECES_21
									,IF(SUBSTRING(A.FECES_OBS,23,1)=2,2,0) AS L_FECES_22
									,IF(SUBSTRING(A.FECES_OBS,24,1)=2,2,0) AS L_FECES_23
									,IF(SUBSTRING(A.FECES_OBS,1,1)=3,3,0) AS D_FECES_00
									,IF(SUBSTRING(A.FECES_OBS,2,1)=3,3,0) AS D_FECES_01
									,IF(SUBSTRING(A.FECES_OBS,3,1)=3,3,0) AS D_FECES_02
									,IF(SUBSTRING(A.FECES_OBS,4,1)=3,3,0) AS D_FECES_03
									,IF(SUBSTRING(A.FECES_OBS,5,1)=3,3,0) AS D_FECES_04
									,IF(SUBSTRING(A.FECES_OBS,6,1)=3,3,0) AS D_FECES_05
									,IF(SUBSTRING(A.FECES_OBS,7,1)=3,3,0) AS D_FECES_06
									,IF(SUBSTRING(A.FECES_OBS,8,1)=3,3,0) AS D_FECES_07
									,IF(SUBSTRING(A.FECES_OBS,9,1)=3,3,0) AS D_FECES_08
									,IF(SUBSTRING(A.FECES_OBS,10,1)=3,3,0) AS D_FECES_09
									,IF(SUBSTRING(A.FECES_OBS,11,1)=3,3,0) AS D_FECES_10
									,IF(SUBSTRING(A.FECES_OBS,12,1)=3,3,0) AS D_FECES_11
									,IF(SUBSTRING(A.FECES_OBS,13,1)=3,3,0) AS D_FECES_12
									,IF(SUBSTRING(A.FECES_OBS,14,1)=3,3,0) AS D_FECES_13
									,IF(SUBSTRING(A.FECES_OBS,15,1)=3,3,0) AS D_FECES_14
									,IF(SUBSTRING(A.FECES_OBS,16,1)=3,3,0) AS D_FECES_15
									,IF(SUBSTRING(A.FECES_OBS,17,1)=3,3,0) AS D_FECES_16
									,IF(SUBSTRING(A.FECES_OBS,18,1)=3,3,0) AS D_FECES_17
									,IF(SUBSTRING(A.FECES_OBS,19,1)=3,3,0) AS D_FECES_18
									,IF(SUBSTRING(A.FECES_OBS,20,1)=3,3,0) AS D_FECES_19
									,IF(SUBSTRING(A.FECES_OBS,21,1)=3,3,0) AS D_FECES_20
									,IF(SUBSTRING(A.FECES_OBS,22,1)=3,3,0) AS D_FECES_21
									,IF(SUBSTRING(A.FECES_OBS,23,1)=3,3,0) AS D_FECES_22
									,IF(SUBSTRING(A.FECES_OBS,24,1)=3,3,0) AS D_FECES_23
									,A.DIAPER_CHG
									,IF(SUBSTRING(A.DIAPER_CHG,1,1)=1,1,0) AS N_DIAPER_00
									,IF(SUBSTRING(A.DIAPER_CHG,2,1)=1,1,0) AS N_DIAPER_01
									,IF(SUBSTRING(A.DIAPER_CHG,3,1)=1,1,0) AS N_DIAPER_02
									,IF(SUBSTRING(A.DIAPER_CHG,4,1)=1,1,0) AS N_DIAPER_03
									,IF(SUBSTRING(A.DIAPER_CHG,5,1)=1,1,0) AS N_DIAPER_04
									,IF(SUBSTRING(A.DIAPER_CHG,6,1)=1,1,0) AS N_DIAPER_05
									,IF(SUBSTRING(A.DIAPER_CHG,7,1)=1,1,0) AS N_DIAPER_06
									,IF(SUBSTRING(A.DIAPER_CHG,8,1)=1,1,0) AS N_DIAPER_07
									,IF(SUBSTRING(A.DIAPER_CHG,9,1)=1,1,0) AS N_DIAPER_08
									,IF(SUBSTRING(A.DIAPER_CHG,10,1)=1,1,0) AS N_DIAPER_09
									,IF(SUBSTRING(A.DIAPER_CHG,11,1)=1,1,0) AS N_DIAPER_10
									,IF(SUBSTRING(A.DIAPER_CHG,12,1)=1,1,0) AS N_DIAPER_11
									,IF(SUBSTRING(A.DIAPER_CHG,13,1)=1,1,0) AS N_DIAPER_12
									,IF(SUBSTRING(A.DIAPER_CHG,14,1)=1,1,0) AS N_DIAPER_13
									,IF(SUBSTRING(A.DIAPER_CHG,15,1)=1,1,0) AS N_DIAPER_14
									,IF(SUBSTRING(A.DIAPER_CHG,16,1)=1,1,0) AS N_DIAPER_15
									,IF(SUBSTRING(A.DIAPER_CHG,17,1)=1,1,0) AS N_DIAPER_16
									,IF(SUBSTRING(A.DIAPER_CHG,18,1)=1,1,0) AS N_DIAPER_17
									,IF(SUBSTRING(A.DIAPER_CHG,19,1)=1,1,0) AS N_DIAPER_18
									,IF(SUBSTRING(A.DIAPER_CHG,20,1)=1,1,0) AS N_DIAPER_19
									,IF(SUBSTRING(A.DIAPER_CHG,21,1)=1,1,0) AS N_DIAPER_20
									,IF(SUBSTRING(A.DIAPER_CHG,22,1)=1,1,0) AS N_DIAPER_21
									,IF(SUBSTRING(A.DIAPER_CHG,23,1)=1,1,0) AS N_DIAPER_22
									,IF(SUBSTRING(A.DIAPER_CHG,24,1)=1,1,0) AS N_DIAPER_23
									
									,IF(SUBSTRING(A.DIAPER_CHG,1,1)=2,2,0) AS S_DIAPER_00
									,IF(SUBSTRING(A.DIAPER_CHG,2,1)=2,2,0) AS S_DIAPER_01
									,IF(SUBSTRING(A.DIAPER_CHG,3,1)=2,2,0) AS S_DIAPER_02
									,IF(SUBSTRING(A.DIAPER_CHG,4,1)=2,2,0) AS S_DIAPER_03
									,IF(SUBSTRING(A.DIAPER_CHG,5,1)=2,2,0) AS S_DIAPER_04
									,IF(SUBSTRING(A.DIAPER_CHG,6,1)=2,2,0) AS S_DIAPER_05
									,IF(SUBSTRING(A.DIAPER_CHG,7,1)=2,2,0) AS S_DIAPER_06
									,IF(SUBSTRING(A.DIAPER_CHG,8,1)=2,2,0) AS S_DIAPER_07
									,IF(SUBSTRING(A.DIAPER_CHG,9,1)=2,2,0) AS S_DIAPER_08
									,IF(SUBSTRING(A.DIAPER_CHG,10,1)=2,2,0) AS S_DIAPER_09
									,IF(SUBSTRING(A.DIAPER_CHG,11,1)=2,2,0) AS S_DIAPER_10
									,IF(SUBSTRING(A.DIAPER_CHG,12,1)=2,2,0) AS S_DIAPER_11
									,IF(SUBSTRING(A.DIAPER_CHG,13,1)=2,2,0) AS S_DIAPER_12
									,IF(SUBSTRING(A.DIAPER_CHG,14,1)=2,2,0) AS S_DIAPER_13
									,IF(SUBSTRING(A.DIAPER_CHG,15,1)=2,2,0) AS S_DIAPER_14
									,IF(SUBSTRING(A.DIAPER_CHG,16,1)=2,2,0) AS S_DIAPER_15
									,IF(SUBSTRING(A.DIAPER_CHG,17,1)=2,2,0) AS S_DIAPER_16
									,IF(SUBSTRING(A.DIAPER_CHG,18,1)=2,2,0) AS S_DIAPER_17
									,IF(SUBSTRING(A.DIAPER_CHG,19,1)=2,2,0) AS S_DIAPER_18
									,IF(SUBSTRING(A.DIAPER_CHG,20,1)=2,2,0) AS S_DIAPER_19
									,IF(SUBSTRING(A.DIAPER_CHG,21,1)=2,2,0) AS S_DIAPER_20
									,IF(SUBSTRING(A.DIAPER_CHG,22,1)=2,2,0) AS S_DIAPER_21
									,IF(SUBSTRING(A.DIAPER_CHG,23,1)=2,2,0) AS S_DIAPER_22
									,IF(SUBSTRING(A.DIAPER_CHG,24,1)=2,2,0) AS S_DIAPER_23
									,A.CLOTH_CHG
									,IFNULL(NULLIF(SUBSTRING(A.CLOTH_CHG,1,1) ,''),'0') AS TM_CLOSE_00
									,IFNULL(NULLIF(SUBSTRING(A.CLOTH_CHG,2,1) ,''),'0') AS TM_CLOSE_01
									,IFNULL(NULLIF(SUBSTRING(A.CLOTH_CHG,3,1) ,''),'0') AS TM_CLOSE_02
									,IFNULL(NULLIF(SUBSTRING(A.CLOTH_CHG,4,1) ,''),'0') AS TM_CLOSE_03
									,IFNULL(NULLIF(SUBSTRING(A.CLOTH_CHG,5,1) ,''),'0') AS TM_CLOSE_04
									,IFNULL(NULLIF(SUBSTRING(A.CLOTH_CHG,6,1) ,''),'0') AS TM_CLOSE_05
									,IFNULL(NULLIF(SUBSTRING(A.CLOTH_CHG,7,1) ,''),'0') AS TM_CLOSE_06
									,IFNULL(NULLIF(SUBSTRING(A.CLOTH_CHG,8,1) ,''),'0') AS TM_CLOSE_07
									,IFNULL(NULLIF(SUBSTRING(A.CLOTH_CHG,9,1) ,''),'0') AS TM_CLOSE_08
									,IFNULL(NULLIF(SUBSTRING(A.CLOTH_CHG,10,1),''),'0') AS TM_CLOSE_09
									,IFNULL(NULLIF(SUBSTRING(A.CLOTH_CHG,11,1),''),'0') AS TM_CLOSE_10
									,IFNULL(NULLIF(SUBSTRING(A.CLOTH_CHG,12,1),''),'0') AS TM_CLOSE_11
									,IFNULL(NULLIF(SUBSTRING(A.CLOTH_CHG,13,1),''),'0') AS TM_CLOSE_12
									,IFNULL(NULLIF(SUBSTRING(A.CLOTH_CHG,14,1),''),'0') AS TM_CLOSE_13
									,IFNULL(NULLIF(SUBSTRING(A.CLOTH_CHG,15,1),''),'0') AS TM_CLOSE_14
									,IFNULL(NULLIF(SUBSTRING(A.CLOTH_CHG,16,1),''),'0') AS TM_CLOSE_15
									,IFNULL(NULLIF(SUBSTRING(A.CLOTH_CHG,17,1),''),'0') AS TM_CLOSE_16
									,IFNULL(NULLIF(SUBSTRING(A.CLOTH_CHG,18,1),''),'0') AS TM_CLOSE_17
									,IFNULL(NULLIF(SUBSTRING(A.CLOTH_CHG,19,1),''),'0') AS TM_CLOSE_18
									,IFNULL(NULLIF(SUBSTRING(A.CLOTH_CHG,20,1),''),'0') AS TM_CLOSE_19
									,IFNULL(NULLIF(SUBSTRING(A.CLOTH_CHG,21,1),''),'0') AS TM_CLOSE_20
									,IFNULL(NULLIF(SUBSTRING(A.CLOTH_CHG,22,1),''),'0') AS TM_CLOSE_21
									,IFNULL(NULLIF(SUBSTRING(A.CLOTH_CHG,23,1),''),'0') AS TM_CLOSE_22
									,IFNULL(NULLIF(SUBSTRING(A.CLOTH_CHG,24,1),''),'0') AS TM_CLOSE_23
									,A.REMARK
									,A.REG_PGM_ID
									,A.REG_USER
									,(SELECT CU.USER_NM_KOR
										FROM T_CM_USER CU
									   WHERE A.COMPANY_CD = CU.COMPANY_CD
									     AND A.REG_USER = CU.USER_ID) AS REG_USER_NM
									,A.REG_DT
									,A.REG_DT_CURR
									,A.REG_DT_LOC
									,A.REG_IP
									,A.MOD_PGM_ID
									,A.MOD_USER
									,(SELECT CU.USER_NM_KOR
										FROM T_CM_USER CU
									   WHERE A.COMPANY_CD = CU.COMPANY_CD
									     AND A.MOD_USER = CU.USER_ID) AS MOD_USER_NM
									,A.MOD_DT
									,A.MOD_DT_CURR
									,A.MOD_DT_LOC
									,A.MOD_IP
									,@ROWNUM:=@ROWNUM+1 AS ROWNUM
									,A.DAW_MANAGER_ID
									,A.DAW_MANAGER_NM
									-- ,IFNULL(NULLIF(A.IR_INPUT_FLAG,''),'000000000000000000000000') AS IR_INPUT_FLAG
									,IF(LENGTH(A.IR_INPUT_FLAG)>10,A.IR_INPUT_FLAG,RPAD(A.IR_INPUT_FLAG,24,'0')) AS IR_INPUT_FLAG
									-- ,IFNULL(NULLIF(A.IR_INPUT_FLAG,''),'000000000000000000000000') AS ORI_IR_INPUT_FLAG
									,IF(LENGTH(A.IR_INPUT_FLAG)>10,A.IR_INPUT_FLAG,RPAD(A.IR_INPUT_FLAG,24,'0')) AS ORI_IR_INPUT_FLAG
				              	FROM T_NU_EXCRETION A
				              		,(SELECT @ROWNUM:=0) ROWNUM                                                                                                                                                                              
				               WHERE 1=1
								 
            ]]>
              <if test="COMPANY_CD != '' and COMPANY_CD != null">
                    AND A.COMPANY_CD = #{COMPANY_CD} 
              </if>
              <if test="DT != '' and DT != null">
                    AND A.EXC_DT = #{DT} 
              </if>
               <if test="NAME != '' and NAME != null">
                    AND A.RES_ID IN (SELECT NR.RES_ID
						   			   FROM T_NU_RESIDENT NR
					   	  			  WHERE NR.COMPANY_CD  = #{COMPANY_CD}
					   	  				AND NR.NAME LIKE CONCAT('%', #{NAME},'%') ) 
              </if>
              <if test="AREA != '' and AREA != null">
                    AND A.RES_ID IN (SELECT NR.RES_ID
						   			   FROM T_NU_RESIDENT NR
					   	  			  WHERE NR.COMPANY_CD  = #{COMPANY_CD}
					   	  				AND NR.AREA = #{AREA}) 
              </if>
              <if test="LOCATION != '' and LOCATION != null">
                    AND A.RES_ID IN (SELECT NR.RES_ID
						   			   FROM T_NU_RESIDENT NR
					   	  			  WHERE NR.COMPANY_CD  = #{COMPANY_CD}
					   	  				AND NR.LOCATION = #{LOCATION}) 
              </if>
              <if test="DT != '' and DT != null">                    
                    AND A.EXC_DT = #{DT}								                    				    			  	
              </if>
              <if test="RES_ID != '' and RES_ID != null">                    
                    AND A.RES_ID = #{RES_ID}								                    				    			  	
              </if>
              ORDER BY ROWNUM ASC, A.EXC_DT DESC, RES_NM ASC
    </select> 
    <select id="NUA310CT_DS_LIST2_S" parameterType="java.util.HashMap" resultType="java.util.HashMap">                                                                                                           
            <![CDATA[ 
							  SELECT A.COMPANY_CD
									,A.EXC_DT
									,A.RES_ID
									,(SELECT NR.NAME
										FROM T_NU_RESIDENT NR
									   WHERE A.COMPANY_CD = NR.COMPANY_CD
									     AND A.RES_ID = NR.RES_ID) AS RES_NM
									,(SELECT NR.AREA
										FROM T_NU_RESIDENT NR
									   WHERE A.COMPANY_CD = NR.COMPANY_CD
									     AND A.RES_ID = NR.RES_ID) AS AREA -- 층
									,(SELECT NR.LOCATION
										FROM T_NU_RESIDENT NR
									   WHERE A.COMPANY_CD = NR.COMPANY_CD
									     AND A.RES_ID = NR.RES_ID) AS LOCATION -- 생활실
									,(SELECT NR.BIRTHDAY
										FROM T_NU_RESIDENT NR
									   WHERE A.COMPANY_CD = NR.COMPANY_CD
									     AND A.RES_ID = NR.RES_ID) AS BIRTHDAY
									,(SELECT NR.SEX
										FROM T_NU_RESIDENT NR
									   WHERE A.COMPANY_CD = NR.COMPANY_CD
									     AND A.RES_ID = NR.RES_ID) AS SEX
									,A.DAY_MANAGER_ID
									,A.DAY_MANAGER_NM
									,A.NIG_MANAGER_ID
									,A.NIG_MANAGER_NM
									,A.EXC_TIME
									,SUBSTRING(A.EXC_TIME,1,2) AS TM_MIN_00
									,SUBSTRING(A.EXC_TIME,3,2) AS TM_MIN_01
									,SUBSTRING(A.EXC_TIME,5,2) AS TM_MIN_02
									,SUBSTRING(A.EXC_TIME,7,2) AS TM_MIN_03
									,SUBSTRING(A.EXC_TIME,9,2) AS TM_MIN_04
									,SUBSTRING(A.EXC_TIME,11,2) AS TM_MIN_05
									,SUBSTRING(A.EXC_TIME,13,2) AS TM_MIN_06
									,SUBSTRING(A.EXC_TIME,15,2) AS TM_MIN_07
									,SUBSTRING(A.EXC_TIME,17,2) AS TM_MIN_08
									,SUBSTRING(A.EXC_TIME,19,2) AS TM_MIN_09
									,SUBSTRING(A.EXC_TIME,21,2) AS TM_MIN_10
									,SUBSTRING(A.EXC_TIME,23,2) AS TM_MIN_11
									,SUBSTRING(A.EXC_TIME,25,2) AS TM_MIN_12
									,SUBSTRING(A.EXC_TIME,27,2) AS TM_MIN_13
									,SUBSTRING(A.EXC_TIME,29,2) AS TM_MIN_14
									,SUBSTRING(A.EXC_TIME,31,2) AS TM_MIN_15
									,SUBSTRING(A.EXC_TIME,33,2) AS TM_MIN_16
									,SUBSTRING(A.EXC_TIME,35,2) AS TM_MIN_17
									,SUBSTRING(A.EXC_TIME,37,2) AS TM_MIN_18
									,SUBSTRING(A.EXC_TIME,39,2) AS TM_MIN_19
									,SUBSTRING(A.EXC_TIME,41,2) AS TM_MIN_20
									,SUBSTRING(A.EXC_TIME,43,2) AS TM_MIN_21
									,SUBSTRING(A.EXC_TIME,45,2) AS TM_MIN_22
									,SUBSTRING(A.EXC_TIME,47,2) AS TM_MIN_23
									,A.URIN_OBS
									,IF(SUBSTRING(A.URIN_OBS,1,1)=2,2,1) AS F_URIN_00
									,IF(SUBSTRING(A.URIN_OBS,1,1)=3,3,1) AS M_URIN_00
									,IF(SUBSTRING(A.URIN_OBS,2,1)=2,2,1) AS F_URIN_01
									,IF(SUBSTRING(A.URIN_OBS,2,1)=3,3,1) AS M_URIN_01
									,IF(SUBSTRING(A.URIN_OBS,3,1)=2,2,1) AS F_URIN_02
									,IF(SUBSTRING(A.URIN_OBS,3,1)=3,3,1) AS M_URIN_02
									,IF(SUBSTRING(A.URIN_OBS,4,1)=2,2,1) AS F_URIN_03
									,IF(SUBSTRING(A.URIN_OBS,4,1)=3,3,1) AS M_URIN_03
									,IF(SUBSTRING(A.URIN_OBS,5,1)=2,2,1) AS F_URIN_04
									,IF(SUBSTRING(A.URIN_OBS,5,1)=3,3,1) AS M_URIN_04
									,IF(SUBSTRING(A.URIN_OBS,6,1)=2,2,1) AS F_URIN_05
									,IF(SUBSTRING(A.URIN_OBS,6,1)=3,3,1) AS M_URIN_05
									,IF(SUBSTRING(A.URIN_OBS,7,1)=2,2,1) AS F_URIN_06
									,IF(SUBSTRING(A.URIN_OBS,7,1)=3,3,1) AS M_URIN_06
									,IF(SUBSTRING(A.URIN_OBS,8,1)=2,2,1) AS F_URIN_07
									,IF(SUBSTRING(A.URIN_OBS,8,1)=3,3,1) AS M_URIN_07
									,IF(SUBSTRING(A.URIN_OBS,9,1)=2,2,1) AS F_URIN_08
									,IF(SUBSTRING(A.URIN_OBS,9,1)=3,3,1) AS M_URIN_08
									,IF(SUBSTRING(A.URIN_OBS,10,1)=2,2,1) AS F_URIN_09
									,IF(SUBSTRING(A.URIN_OBS,10,1)=3,3,1) AS M_URIN_09
									,IF(SUBSTRING(A.URIN_OBS,11,1)=2,2,1) AS F_URIN_10
									,IF(SUBSTRING(A.URIN_OBS,11,1)=3,3,1) AS M_URIN_10
									,IF(SUBSTRING(A.URIN_OBS,12,1)=2,2,1) AS F_URIN_11
									,IF(SUBSTRING(A.URIN_OBS,12,1)=3,3,1) AS M_URIN_11
									,IF(SUBSTRING(A.URIN_OBS,13,1)=2,2,1) AS F_URIN_12
									,IF(SUBSTRING(A.URIN_OBS,13,1)=3,3,1) AS M_URIN_12
									,IF(SUBSTRING(A.URIN_OBS,14,1)=2,2,1) AS F_URIN_13
									,IF(SUBSTRING(A.URIN_OBS,14,1)=3,3,1) AS M_URIN_13
									,IF(SUBSTRING(A.URIN_OBS,15,1)=2,2,1) AS F_URIN_14
									,IF(SUBSTRING(A.URIN_OBS,15,1)=3,3,1) AS M_URIN_14
									,IF(SUBSTRING(A.URIN_OBS,16,1)=2,2,1) AS F_URIN_15
									,IF(SUBSTRING(A.URIN_OBS,16,1)=3,3,1) AS M_URIN_15
									,IF(SUBSTRING(A.URIN_OBS,17,1)=2,2,1) AS F_URIN_16
									,IF(SUBSTRING(A.URIN_OBS,17,1)=3,3,1) AS M_URIN_16
									,IF(SUBSTRING(A.URIN_OBS,18,1)=2,2,1) AS F_URIN_17
									,IF(SUBSTRING(A.URIN_OBS,18,1)=3,3,1) AS M_URIN_17
									,IF(SUBSTRING(A.URIN_OBS,19,1)=2,2,1) AS F_URIN_18
									,IF(SUBSTRING(A.URIN_OBS,19,1)=3,3,1) AS M_URIN_18
									,IF(SUBSTRING(A.URIN_OBS,20,1)=2,2,1) AS F_URIN_19
									,IF(SUBSTRING(A.URIN_OBS,20,1)=3,3,1) AS M_URIN_19
									,IF(SUBSTRING(A.URIN_OBS,21,1)=2,2,1) AS F_URIN_20
									,IF(SUBSTRING(A.URIN_OBS,21,1)=3,3,1) AS M_URIN_20
									,IF(SUBSTRING(A.URIN_OBS,22,1)=2,2,1) AS F_URIN_21
									,IF(SUBSTRING(A.URIN_OBS,22,1)=3,3,1) AS M_URIN_21
									,IF(SUBSTRING(A.URIN_OBS,23,1)=2,2,1) AS F_URIN_22
									,IF(SUBSTRING(A.URIN_OBS,23,1)=3,3,1) AS M_URIN_22
									,IF(SUBSTRING(A.URIN_OBS,24,1)=2,2,1) AS F_URIN_23
									,IF(SUBSTRING(A.URIN_OBS,24,1)=3,3,1) AS M_URIN_23
									,A.URIN_QTY
									,TRIM(SUBSTRING(A.URIN_QTY,1,4) ) AS URIN_QTY_00
									,TRIM(SUBSTRING(A.URIN_QTY,5,4) ) AS URIN_QTY_01
									,TRIM(SUBSTRING(A.URIN_QTY,9,4) ) AS URIN_QTY_02
									,TRIM(SUBSTRING(A.URIN_QTY,13,4)) AS URIN_QTY_03
									,TRIM(SUBSTRING(A.URIN_QTY,17,4)) AS URIN_QTY_04
									,TRIM(SUBSTRING(A.URIN_QTY,21,4)) AS URIN_QTY_05
									,TRIM(SUBSTRING(A.URIN_QTY,25,4)) AS URIN_QTY_06
									,TRIM(SUBSTRING(A.URIN_QTY,29,4)) AS URIN_QTY_07
									,TRIM(SUBSTRING(A.URIN_QTY,33,4)) AS URIN_QTY_08
									,TRIM(SUBSTRING(A.URIN_QTY,37,4)) AS URIN_QTY_09
									,TRIM(SUBSTRING(A.URIN_QTY,41,4)) AS URIN_QTY_10
									,TRIM(SUBSTRING(A.URIN_QTY,45,4)) AS URIN_QTY_11
									,TRIM(SUBSTRING(A.URIN_QTY,49,4)) AS URIN_QTY_12
									,TRIM(SUBSTRING(A.URIN_QTY,53,4)) AS URIN_QTY_13
									,TRIM(SUBSTRING(A.URIN_QTY,57,4)) AS URIN_QTY_14
									,TRIM(SUBSTRING(A.URIN_QTY,61,4)) AS URIN_QTY_15
									,TRIM(SUBSTRING(A.URIN_QTY,65,4)) AS URIN_QTY_16
									,TRIM(SUBSTRING(A.URIN_QTY,69,4)) AS URIN_QTY_17
									,TRIM(SUBSTRING(A.URIN_QTY,73,4)) AS URIN_QTY_18
									,TRIM(SUBSTRING(A.URIN_QTY,77,4)) AS URIN_QTY_19
									,TRIM(SUBSTRING(A.URIN_QTY,81,4)) AS URIN_QTY_20
									,TRIM(SUBSTRING(A.URIN_QTY,85,4)) AS URIN_QTY_21
									,TRIM(SUBSTRING(A.URIN_QTY,89,4)) AS URIN_QTY_22
									,TRIM(SUBSTRING(A.URIN_QTY,93,4)) AS URIN_QTY_23
									,A.FECES_OBS
									,IF(SUBSTRING(A.FECES_OBS,1,1)=1,1,0) AS N_FECES_00
									,IF(SUBSTRING(A.FECES_OBS,2,1)=1,1,0) AS N_FECES_01
									,IF(SUBSTRING(A.FECES_OBS,3,1)=1,1,0) AS N_FECES_02
									,IF(SUBSTRING(A.FECES_OBS,4,1)=1,1,0) AS N_FECES_03
									,IF(SUBSTRING(A.FECES_OBS,5,1)=1,1,0) AS N_FECES_04
									,IF(SUBSTRING(A.FECES_OBS,6,1)=1,1,0) AS N_FECES_05
									,IF(SUBSTRING(A.FECES_OBS,7,1)=1,1,0) AS N_FECES_06
									,IF(SUBSTRING(A.FECES_OBS,8,1)=1,1,0) AS N_FECES_07
									,IF(SUBSTRING(A.FECES_OBS,9,1)=1,1,0) AS N_FECES_08
									,IF(SUBSTRING(A.FECES_OBS,10,1)=1,1,0) AS N_FECES_09
									,IF(SUBSTRING(A.FECES_OBS,11,1)=1,1,0) AS N_FECES_10
									,IF(SUBSTRING(A.FECES_OBS,12,1)=1,1,0) AS N_FECES_11
									,IF(SUBSTRING(A.FECES_OBS,13,1)=1,1,0) AS N_FECES_12
									,IF(SUBSTRING(A.FECES_OBS,14,1)=1,1,0) AS N_FECES_13
									,IF(SUBSTRING(A.FECES_OBS,15,1)=1,1,0) AS N_FECES_14
									,IF(SUBSTRING(A.FECES_OBS,16,1)=1,1,0) AS N_FECES_15
									,IF(SUBSTRING(A.FECES_OBS,17,1)=1,1,0) AS N_FECES_16
									,IF(SUBSTRING(A.FECES_OBS,18,1)=1,1,0) AS N_FECES_17
									,IF(SUBSTRING(A.FECES_OBS,19,1)=1,1,0) AS N_FECES_18
									,IF(SUBSTRING(A.FECES_OBS,20,1)=1,1,0) AS N_FECES_19
									,IF(SUBSTRING(A.FECES_OBS,21,1)=1,1,0) AS N_FECES_20
									,IF(SUBSTRING(A.FECES_OBS,22,1)=1,1,0) AS N_FECES_21
									,IF(SUBSTRING(A.FECES_OBS,23,1)=1,1,0) AS N_FECES_22
									,IF(SUBSTRING(A.FECES_OBS,24,1)=1,1,0) AS N_FECES_23
									,IF(SUBSTRING(A.FECES_OBS,1,1)=2,2,0) AS L_FECES_00
									,IF(SUBSTRING(A.FECES_OBS,2,1)=2,2,0) AS L_FECES_01
									,IF(SUBSTRING(A.FECES_OBS,3,1)=2,2,0) AS L_FECES_02
									,IF(SUBSTRING(A.FECES_OBS,4,1)=2,2,0) AS L_FECES_03
									,IF(SUBSTRING(A.FECES_OBS,5,1)=2,2,0) AS L_FECES_04
									,IF(SUBSTRING(A.FECES_OBS,6,1)=2,2,0) AS L_FECES_05
									,IF(SUBSTRING(A.FECES_OBS,7,1)=2,2,0) AS L_FECES_06
									,IF(SUBSTRING(A.FECES_OBS,8,1)=2,2,0) AS L_FECES_07
									,IF(SUBSTRING(A.FECES_OBS,9,1)=2,2,0) AS L_FECES_08
									,IF(SUBSTRING(A.FECES_OBS,10,1)=2,2,0) AS L_FECES_09
									,IF(SUBSTRING(A.FECES_OBS,11,1)=2,2,0) AS L_FECES_10
									,IF(SUBSTRING(A.FECES_OBS,12,1)=2,2,0) AS L_FECES_11
									,IF(SUBSTRING(A.FECES_OBS,13,1)=2,2,0) AS L_FECES_12
									,IF(SUBSTRING(A.FECES_OBS,14,1)=2,2,0) AS L_FECES_13
									,IF(SUBSTRING(A.FECES_OBS,15,1)=2,2,0) AS L_FECES_14
									,IF(SUBSTRING(A.FECES_OBS,16,1)=2,2,0) AS L_FECES_15
									,IF(SUBSTRING(A.FECES_OBS,17,1)=2,2,0) AS L_FECES_16
									,IF(SUBSTRING(A.FECES_OBS,18,1)=2,2,0) AS L_FECES_17
									,IF(SUBSTRING(A.FECES_OBS,19,1)=2,2,0) AS L_FECES_18
									,IF(SUBSTRING(A.FECES_OBS,20,1)=2,2,0) AS L_FECES_19
									,IF(SUBSTRING(A.FECES_OBS,21,1)=2,2,0) AS L_FECES_20
									,IF(SUBSTRING(A.FECES_OBS,22,1)=2,2,0) AS L_FECES_21
									,IF(SUBSTRING(A.FECES_OBS,23,1)=2,2,0) AS L_FECES_22
									,IF(SUBSTRING(A.FECES_OBS,24,1)=2,2,0) AS L_FECES_23
									,IF(SUBSTRING(A.FECES_OBS,1,1)=3,3,0) AS D_FECES_00
									,IF(SUBSTRING(A.FECES_OBS,2,1)=3,3,0) AS D_FECES_01
									,IF(SUBSTRING(A.FECES_OBS,3,1)=3,3,0) AS D_FECES_02
									,IF(SUBSTRING(A.FECES_OBS,4,1)=3,3,0) AS D_FECES_03
									,IF(SUBSTRING(A.FECES_OBS,5,1)=3,3,0) AS D_FECES_04
									,IF(SUBSTRING(A.FECES_OBS,6,1)=3,3,0) AS D_FECES_05
									,IF(SUBSTRING(A.FECES_OBS,7,1)=3,3,0) AS D_FECES_06
									,IF(SUBSTRING(A.FECES_OBS,8,1)=3,3,0) AS D_FECES_07
									,IF(SUBSTRING(A.FECES_OBS,9,1)=3,3,0) AS D_FECES_08
									,IF(SUBSTRING(A.FECES_OBS,10,1)=3,3,0) AS D_FECES_09
									,IF(SUBSTRING(A.FECES_OBS,11,1)=3,3,0) AS D_FECES_10
									,IF(SUBSTRING(A.FECES_OBS,12,1)=3,3,0) AS D_FECES_11
									,IF(SUBSTRING(A.FECES_OBS,13,1)=3,3,0) AS D_FECES_12
									,IF(SUBSTRING(A.FECES_OBS,14,1)=3,3,0) AS D_FECES_13
									,IF(SUBSTRING(A.FECES_OBS,15,1)=3,3,0) AS D_FECES_14
									,IF(SUBSTRING(A.FECES_OBS,16,1)=3,3,0) AS D_FECES_15
									,IF(SUBSTRING(A.FECES_OBS,17,1)=3,3,0) AS D_FECES_16
									,IF(SUBSTRING(A.FECES_OBS,18,1)=3,3,0) AS D_FECES_17
									,IF(SUBSTRING(A.FECES_OBS,19,1)=3,3,0) AS D_FECES_18
									,IF(SUBSTRING(A.FECES_OBS,20,1)=3,3,0) AS D_FECES_19
									,IF(SUBSTRING(A.FECES_OBS,21,1)=3,3,0) AS D_FECES_20
									,IF(SUBSTRING(A.FECES_OBS,22,1)=3,3,0) AS D_FECES_21
									,IF(SUBSTRING(A.FECES_OBS,23,1)=3,3,0) AS D_FECES_22
									,IF(SUBSTRING(A.FECES_OBS,24,1)=3,3,0) AS D_FECES_23
									,A.DIAPER_CHG
									,IF(SUBSTRING(A.DIAPER_CHG,1,1)=1,1,0)  AS N_DIAPER_00
									,IF(SUBSTRING(A.DIAPER_CHG,2,1)=1,1,0) AS N_DIAPER_01
									,IF(SUBSTRING(A.DIAPER_CHG,3,1)=1,1,0) AS N_DIAPER_02
									,IF(SUBSTRING(A.DIAPER_CHG,4,1)=1,1,0) AS N_DIAPER_03
									,IF(SUBSTRING(A.DIAPER_CHG,5,1)=1,1,0) AS N_DIAPER_04
									,IF(SUBSTRING(A.DIAPER_CHG,6,1)=1,1,0) AS N_DIAPER_05
									,IF(SUBSTRING(A.DIAPER_CHG,7,1)=1,1,0) AS N_DIAPER_06
									,IF(SUBSTRING(A.DIAPER_CHG,8,1)=1,1,0) AS N_DIAPER_07
									,IF(SUBSTRING(A.DIAPER_CHG,9,1)=1,1,0) AS N_DIAPER_08
									,IF(SUBSTRING(A.DIAPER_CHG,10,1)=1,1,0) AS N_DIAPER_09
									,IF(SUBSTRING(A.DIAPER_CHG,11,1)=1,1,0) AS N_DIAPER_10
									,IF(SUBSTRING(A.DIAPER_CHG,12,1)=1,1,0) AS N_DIAPER_11
									,IF(SUBSTRING(A.DIAPER_CHG,13,1)=1,1,0) AS N_DIAPER_12
									,IF(SUBSTRING(A.DIAPER_CHG,14,1)=1,1,0) AS N_DIAPER_13
									,IF(SUBSTRING(A.DIAPER_CHG,15,1)=1,1,0) AS N_DIAPER_14
									,IF(SUBSTRING(A.DIAPER_CHG,16,1)=1,1,0) AS N_DIAPER_15
									,IF(SUBSTRING(A.DIAPER_CHG,17,1)=1,1,0) AS N_DIAPER_16
									,IF(SUBSTRING(A.DIAPER_CHG,18,1)=1,1,0) AS N_DIAPER_17
									,IF(SUBSTRING(A.DIAPER_CHG,19,1)=1,1,0) AS N_DIAPER_18
									,IF(SUBSTRING(A.DIAPER_CHG,20,1)=1,1,0) AS N_DIAPER_19
									,IF(SUBSTRING(A.DIAPER_CHG,21,1)=1,1,0) AS N_DIAPER_20
									,IF(SUBSTRING(A.DIAPER_CHG,22,1)=1,1,0) AS N_DIAPER_21
									,IF(SUBSTRING(A.DIAPER_CHG,23,1)=1,1,0) AS N_DIAPER_22
									,IF(SUBSTRING(A.DIAPER_CHG,24,1)=1,1,0) AS N_DIAPER_23
									
									,IF(SUBSTRING(A.DIAPER_CHG,1,1)=2,2,0) AS S_DIAPER_00
									,IF(SUBSTRING(A.DIAPER_CHG,2,1)=2,2,0) AS S_DIAPER_01
									,IF(SUBSTRING(A.DIAPER_CHG,3,1)=2,2,0) AS S_DIAPER_02
									,IF(SUBSTRING(A.DIAPER_CHG,4,1)=2,2,0) AS S_DIAPER_03
									,IF(SUBSTRING(A.DIAPER_CHG,5,1)=2,2,0) AS S_DIAPER_04
									,IF(SUBSTRING(A.DIAPER_CHG,6,1)=2,2,0) AS S_DIAPER_05
									,IF(SUBSTRING(A.DIAPER_CHG,7,1)=2,2,0) AS S_DIAPER_06
									,IF(SUBSTRING(A.DIAPER_CHG,8,1)=2,2,0) AS S_DIAPER_07
									,IF(SUBSTRING(A.DIAPER_CHG,9,1)=2,2,0) AS S_DIAPER_08
									,IF(SUBSTRING(A.DIAPER_CHG,10,1)=2,2,0) AS S_DIAPER_09
									,IF(SUBSTRING(A.DIAPER_CHG,11,1)=2,2,0) AS S_DIAPER_10
									,IF(SUBSTRING(A.DIAPER_CHG,12,1)=2,2,0) AS S_DIAPER_11
									,IF(SUBSTRING(A.DIAPER_CHG,13,1)=2,2,0) AS S_DIAPER_12
									,IF(SUBSTRING(A.DIAPER_CHG,14,1)=2,2,0) AS S_DIAPER_13
									,IF(SUBSTRING(A.DIAPER_CHG,15,1)=2,2,0) AS S_DIAPER_14
									,IF(SUBSTRING(A.DIAPER_CHG,16,1)=2,2,0) AS S_DIAPER_15
									,IF(SUBSTRING(A.DIAPER_CHG,17,1)=2,2,0) AS S_DIAPER_16
									,IF(SUBSTRING(A.DIAPER_CHG,18,1)=2,2,0) AS S_DIAPER_17
									,IF(SUBSTRING(A.DIAPER_CHG,19,1)=2,2,0) AS S_DIAPER_18
									,IF(SUBSTRING(A.DIAPER_CHG,20,1)=2,2,0) AS S_DIAPER_19
									,IF(SUBSTRING(A.DIAPER_CHG,21,1)=2,2,0) AS S_DIAPER_20
									,IF(SUBSTRING(A.DIAPER_CHG,22,1)=2,2,0) AS S_DIAPER_21
									,IF(SUBSTRING(A.DIAPER_CHG,23,1)=2,2,0) AS S_DIAPER_22
									,IF(SUBSTRING(A.DIAPER_CHG,24,1)=2,2,0) AS S_DIAPER_23
									,A.CLOTH_CHG
									,SUBSTRING(A.CLOTH_CHG,1,1) AS TM_CLOSE_00
									,SUBSTRING(A.CLOTH_CHG,2,1) AS TM_CLOSE_01
									,SUBSTRING(A.CLOTH_CHG,3,1) AS TM_CLOSE_02
									,SUBSTRING(A.CLOTH_CHG,4,1) AS TM_CLOSE_03
									,SUBSTRING(A.CLOTH_CHG,5,1) AS TM_CLOSE_04
									,SUBSTRING(A.CLOTH_CHG,6,1) AS TM_CLOSE_05
									,SUBSTRING(A.CLOTH_CHG,7,1) AS TM_CLOSE_06
									,SUBSTRING(A.CLOTH_CHG,8,1) AS TM_CLOSE_07
									,SUBSTRING(A.CLOTH_CHG,9,1) AS TM_CLOSE_08
									,SUBSTRING(A.CLOTH_CHG,10,1) AS TM_CLOSE_09
									,SUBSTRING(A.CLOTH_CHG,11,1) AS TM_CLOSE_10
									,SUBSTRING(A.CLOTH_CHG,12,1) AS TM_CLOSE_11
									,SUBSTRING(A.CLOTH_CHG,13,1) AS TM_CLOSE_12
									,SUBSTRING(A.CLOTH_CHG,14,1) AS TM_CLOSE_13
									,SUBSTRING(A.CLOTH_CHG,15,1) AS TM_CLOSE_14
									,SUBSTRING(A.CLOTH_CHG,16,1) AS TM_CLOSE_15
									,SUBSTRING(A.CLOTH_CHG,17,1) AS TM_CLOSE_16
									,SUBSTRING(A.CLOTH_CHG,18,1) AS TM_CLOSE_17
									,SUBSTRING(A.CLOTH_CHG,19,1) AS TM_CLOSE_18
									,SUBSTRING(A.CLOTH_CHG,20,1) AS TM_CLOSE_19
									,SUBSTRING(A.CLOTH_CHG,21,1) AS TM_CLOSE_20
									,SUBSTRING(A.CLOTH_CHG,22,1) AS TM_CLOSE_21
									,SUBSTRING(A.CLOTH_CHG,23,1) AS TM_CLOSE_22
									,SUBSTRING(A.CLOTH_CHG,24,1) AS TM_CLOSE_23
									,A.REMARK
									,A.REG_PGM_ID
									,A.REG_USER
									,(SELECT CU.USER_NM_KOR
										FROM T_CM_USER CU
									   WHERE A.COMPANY_CD = CU.COMPANY_CD
									     AND A.REG_USER = CU.USER_ID) AS REG_USER_NM
									,A.REG_DT
									,A.REG_DT_CURR
									,A.REG_DT_LOC
									,A.REG_IP
									,A.MOD_PGM_ID
									,A.MOD_USER
									,(SELECT CU.USER_NM_KOR
										FROM T_CM_USER CU
									   WHERE A.COMPANY_CD = CU.COMPANY_CD
									     AND A.MOD_USER = CU.USER_ID) AS MOD_USER_NM
									,A.MOD_DT
									,A.MOD_DT_CURR
									,A.MOD_DT_LOC
									,A.MOD_IP
									,A.DAW_MANAGER_ID
									,A.DAW_MANAGER_NM
									,A.IR_INPUT_FLAG																		
									,@ROWNUM:=@ROWNUM+1 AS ROWNUM
				              	FROM T_NU_EXCRETION A
				              		,(SELECT @ROWNUM:=0) ROWNUM                                                                                                                                                                              
				               WHERE 1=1
								 
            ]]>
              <if test="COMPANY_CD != '' and COMPANY_CD != null">
                    AND A.COMPANY_CD = #{COMPANY_CD} 
              </if>
              <if test="RES_ID != '' and RES_ID != null">
                    AND A.RES_ID = #{RES_ID} 
              </if>
              <if test="EXC_DT != '' and EXC_DT != null">
                    AND A.EXC_DT = DATE_FORMAT(DATE_ADD(#{EXC_DT},INTERVAL 1 DAY),'%Y%m%d')
              </if>
              ORDER BY A.EXC_DT DESC, RES_NM ASC
    </select>                                                                                                                                                                                                                                                                                                                                                                                                              
	<!--INSERT  -->                                                                                                                                                                                                   
	<insert id="NUA310CT_DS_LIST_I" parameterType="java.util.HashMap">                                                                                            
    <![CDATA[                                                                                                                                                                                                      
			   INSERT INTO T_NU_EXCRETION (                                                                                                                                                                                 
					         COMPANY_CD
							,EXC_DT
							,RES_ID
							,DAY_MANAGER_ID
							,DAY_MANAGER_NM
							,NIG_MANAGER_ID
							,NIG_MANAGER_NM
							,EXC_TIME
							,URIN_OBS
							,FECES_OBS
							,DIAPER_CHG
							,CLOTH_CHG
							,URIN_QTY
							,REMARK
							,REG_PGM_ID
							,REG_USER
							,REG_DT
							,REG_DT_CURR
							,REG_DT_LOC
							,REG_IP
							,DAW_MANAGER_ID
							,DAW_MANAGER_NM
							,IR_INPUT_FLAG
				) VALUES (                                                                                                                                                                               
					      	 #{COMPANY_CD    }
							,#{EXC_DT        }
							,#{RES_ID        }
							,#{DAY_MANAGER_ID}
							,#{DAY_MANAGER_NM}
							,#{NIG_MANAGER_ID}
							,#{NIG_MANAGER_NM}
							,#{MIN}
							,#{URIN}
							,#{FECES}
							,#{DIAPER}
							,#{CLOTH}
							,CONCAT(LPAD(IFNULL(#{URIN_QTY_00},0),4,' '),LPAD(IFNULL(#{URIN_QTY_01},0),4,' '),LPAD(IFNULL(#{URIN_QTY_02},0),4,' '),LPAD(IFNULL(#{URIN_QTY_03},0),4,' '),LPAD(IFNULL(#{URIN_QTY_04},0),4,' '),LPAD(IFNULL(#{URIN_QTY_05},0),4,' '),LPAD(IFNULL(#{URIN_QTY_06},0),4,' '),LPAD(IFNULL(#{URIN_QTY_07},0),4,' '),LPAD(IFNULL(#{URIN_QTY_08},0),4,' '),LPAD(IFNULL(#{URIN_QTY_09},0),4,' '),LPAD(IFNULL(#{URIN_QTY_10},0),4,' '),LPAD(IFNULL(#{URIN_QTY_11},0),4,' '),LPAD(IFNULL(#{URIN_QTY_12},0),4,' '),LPAD(IFNULL(#{URIN_QTY_13},0),4,' '),LPAD(IFNULL(#{URIN_QTY_14},0),4,' '),LPAD(IFNULL(#{URIN_QTY_15},0),4,' '),LPAD(IFNULL(#{URIN_QTY_16},0),4,' '),LPAD(IFNULL(#{URIN_QTY_17},0),4,' '),LPAD(IFNULL(#{URIN_QTY_18},0),4,' '),LPAD(IFNULL(#{URIN_QTY_19},0),4,' '),LPAD(IFNULL(#{URIN_QTY_20},0),4,' '),LPAD(IFNULL(#{URIN_QTY_21},0),4,' '),LPAD(IFNULL(#{URIN_QTY_22},0),4,' '),LPAD(IFNULL(#{URIN_QTY_23},0),4,' '))
							,#{REMARK        }
							,#{REG_PGM_ID    }
							,#{REG_USER      }
							,#{REG_DT        }
							,#{REG_DT_CURR   }
							,#{REG_DT_LOC    }
							,#{REG_IP        }
							,#{DAW_MANAGER_ID}
							,#{DAW_MANAGER_NM}
							,#{IR_INPUT_FLAG }
				)                                                                                                                                                                                                            
    ]]>                                                                                                                                                                                                            
    </insert>
    <!--INSERT  -->                                                                                                                                                                                                   
	<insert id="NUA310CT_DS_LIST2_I" parameterType="java.util.HashMap">                                                                                            
    <![CDATA[                                                                                                                                                                                                      
			   INSERT INTO T_NU_EXCRETION (                                                                                                                                                                                 
					         COMPANY_CD
							,EXC_DT
							,RES_ID
							,DAY_MANAGER_ID
							,DAY_MANAGER_NM
							,NIG_MANAGER_ID
							,NIG_MANAGER_NM
							,EXC_TIME
							,URIN_OBS
							,FECES_OBS
							,DIAPER_CHG
							,CLOTH_CHG
							,URIN_QTY
							,REMARK
							,REG_PGM_ID
							,REG_USER
							,REG_DT
							,REG_DT_CURR
							,REG_DT_LOC
							,REG_IP
							,DAW_MANAGER_ID
							,DAW_MANAGER_NM
							,IR_INPUT_FLAG
				) VALUES (                                                                                                                                                                               
					      	 #{COMPANY_CD    }
							,#{EXC_DT        }
							,#{RES_ID        }
							,#{DAY_MANAGER_ID}
							,#{DAY_MANAGER_NM}
							,#{NIG_MANAGER_ID}
							,#{NIG_MANAGER_NM}
							,#{MIN}
							,#{URIN}
							,#{FECES}
							,#{DIAPER}
							,#{CLOTH}
							,CONCAT(LPAD(IFNULL(#{URIN_QTY_00},0),4,' '),LPAD(IFNULL(#{URIN_QTY_01},0),4,' '),LPAD(IFNULL(#{URIN_QTY_02},0),4,' '),LPAD(IFNULL(#{URIN_QTY_03},0),4,' '),LPAD(IFNULL(#{URIN_QTY_04},0),4,' '),LPAD(IFNULL(#{URIN_QTY_05},0),4,' '),LPAD(IFNULL(#{URIN_QTY_06},0),4,' '),LPAD(IFNULL(#{URIN_QTY_07},0),4,' '),LPAD(IFNULL(#{URIN_QTY_08},0),4,' '))
							,#{REMARK        }
							,#{REG_PGM_ID    }
							,#{REG_USER      }
							,#{REG_DT        }
							,#{REG_DT_CURR   }
							,#{REG_DT_LOC    }
							,#{REG_IP        }
							,#{DAW_MANAGER_ID}
							,#{DAW_MANAGER_NM}
							,#{IR_INPUT_FLAG }
				)                                                                                                                                                                                                            
    ]]>                                                                                                                                                                                                            
    </insert>
	<!--UPDATE  -->                                                                                                                                                                                                   
    <update id="NUA310CT_DS_LIST_U" parameterType="java.util.HashMap">                                                                                          
    	<![CDATA[                                                                                                                                                                                                      
					  UPDATE T_NU_EXCRETION                                                                                                                                                                                              
						 SET DAY_MANAGER_ID = #{DAY_MANAGER_ID}
							,DAY_MANAGER_NM = #{DAY_MANAGER_NM}
							,NIG_MANAGER_ID = #{NIG_MANAGER_ID}
							,NIG_MANAGER_NM = #{NIG_MANAGER_NM}
							,DAW_MANAGER_ID = #{DAW_MANAGER_ID}
							,DAW_MANAGER_NM = #{DAW_MANAGER_NM}
							,IR_INPUT_FLAG  = #{IR_INPUT_FLAG}
							,EXC_TIME       = #{MIN}
							,URIN_OBS       = #{URIN}
							,FECES_OBS      = #{FECES}
							,DIAPER_CHG     = #{DIAPER}
							,CLOTH_CHG      = #{CLOTH}
							,URIN_QTY       = CONCAT(LPAD(IFNULL(#{URIN_QTY_00},0),4,' '),LPAD(IFNULL(#{URIN_QTY_01},0),4,' '),LPAD(IFNULL(#{URIN_QTY_02},0),4,' '),LPAD(IFNULL(#{URIN_QTY_03},0),4,' '),LPAD(IFNULL(#{URIN_QTY_04},0),4,' '),LPAD(IFNULL(#{URIN_QTY_05},0),4,' '),LPAD(IFNULL(#{URIN_QTY_06},0),4,' '),LPAD(IFNULL(#{URIN_QTY_07},0),4,' '),LPAD(IFNULL(#{URIN_QTY_08},0),4,' '),LPAD(IFNULL(#{URIN_QTY_09},0),4,' '),LPAD(IFNULL(#{URIN_QTY_10},0),4,' '),LPAD(IFNULL(#{URIN_QTY_11},0),4,' '),LPAD(IFNULL(#{URIN_QTY_12},0),4,' '),LPAD(IFNULL(#{URIN_QTY_13},0),4,' '),LPAD(IFNULL(#{URIN_QTY_14},0),4,' '),LPAD(IFNULL(#{URIN_QTY_15},0),4,' '),LPAD(IFNULL(#{URIN_QTY_16},0),4,' '),LPAD(IFNULL(#{URIN_QTY_17},0),4,' '),LPAD(IFNULL(#{URIN_QTY_18},0),4,' '),LPAD(IFNULL(#{URIN_QTY_19},0),4,' '),LPAD(IFNULL(#{URIN_QTY_20},0),4,' '),LPAD(IFNULL(#{URIN_QTY_21},0),4,' '),LPAD(IFNULL(#{URIN_QTY_22},0),4,' '),LPAD(IFNULL(#{URIN_QTY_23},0),4,' '))
							,REMARK        =#{REMARK	  }
							,MOD_PGM_ID    =#{MOD_PGM_ID  }
							,MOD_USER      =#{MOD_USER    }
							,MOD_DT        =#{MOD_DT      }
							,MOD_DT_CURR   =#{MOD_DT_CURR }
							,MOD_DT_LOC    =#{MOD_DT_LOC  }
							,MOD_IP        =#{MOD_IP      }
			         WHERE 1=1
			           AND COMPANY_CD = #{COMPANY_CD}
					   AND EXC_DT     = #{EXC_DT}
					   AND RES_ID     = #{RES_ID}
    ]]>                                                                                                                                                                                                            
    </update> 
    <update id="NUA310CT_DS_LIST2_U" parameterType="java.util.HashMap">                                                                                          
    	<![CDATA[                                                                                                                                                                                                      
					  UPDATE T_NU_EXCRETION                                                                                                                                                                                              
						 SET DAY_MANAGER_ID = #{DAY_MANAGER_ID}
							,DAY_MANAGER_NM = #{DAY_MANAGER_NM}
							,NIG_MANAGER_ID = #{NIG_MANAGER_ID}
							,NIG_MANAGER_NM = #{NIG_MANAGER_NM}
							,DAW_MANAGER_ID = #{DAW_MANAGER_ID}
							,DAW_MANAGER_NM = #{DAW_MANAGER_NM}
							,IR_INPUT_FLAG  = IF(LENGTH(IR_INPUT_FLAG)	<10,#{IR_INPUT_FLAG},CONCAT(SUBSTRING(#{IR_INPUT_FLAG},1,9)	,SUBSTRING(IR_INPUT_FLAG,10,15)))
							,EXC_TIME       = IF(LENGTH(EXC_TIME)		<20,#{MIN}			,CONCAT(SUBSTRING(#{MIN},1,18)			,SUBSTRING(EXC_TIME,19,30)))  
							,URIN_OBS       = IF(LENGTH(URIN_OBS)		<10,#{URIN}			,CONCAT(SUBSTRING(#{URIN},1,9)			,SUBSTRING(URIN_OBS,10,15)))
							,FECES_OBS      = IF(LENGTH(FECES_OBS)		<10,#{FECES}		,CONCAT(SUBSTRING(#{FECES},1,9)			,SUBSTRING(FECES_OBS,10,15)))
							,DIAPER_CHG     = IF(LENGTH(DIAPER_CHG)		<10,#{DIAPER}		,CONCAT(SUBSTRING(#{DIAPER},1,9)		,SUBSTRING(DIAPER_CHG,10,15)))
							,CLOTH_CHG      = IF(LENGTH(CLOTH_CHG)		<10,#{CLOTH}		,CONCAT(SUBSTRING(#{CLOTH},1,9)			,SUBSTRING(CLOTH_CHG,10	,15)))
							,URIN_QTY       = IF(LENGTH(URIN_QTY)		<37					,CONCAT(LPAD(IFNULL(#{URIN_QTY_00},0),4,' '),LPAD(IFNULL(#{URIN_QTY_01},0),4,' '),LPAD(IFNULL(#{URIN_QTY_02},0),4,' '),LPAD(IFNULL(#{URIN_QTY_03},0),4,' '),LPAD(IFNULL(#{URIN_QTY_04},0),4,' '),LPAD(IFNULL(#{URIN_QTY_05},0),4,' '),LPAD(IFNULL(#{URIN_QTY_06},0),4,' '),LPAD(IFNULL(#{URIN_QTY_07},0),4,' '),LPAD(IFNULL(#{URIN_QTY_08},0),4,' '))	,CONCAT(LPAD(IFNULL(#{URIN_QTY_00},0),4,' '),LPAD(IFNULL(#{URIN_QTY_01},0),4,' '),LPAD(IFNULL(#{URIN_QTY_02},0),4,' '),LPAD(IFNULL(#{URIN_QTY_03},0),4,' '),LPAD(IFNULL(#{URIN_QTY_04},0),4,' '),LPAD(IFNULL(#{URIN_QTY_05},0),4,' '),LPAD(IFNULL(#{URIN_QTY_06},0),4,' '),LPAD(IFNULL(#{URIN_QTY_07},0),4,' '),LPAD(IFNULL(#{URIN_QTY_08},0),4,' '),SUBSTRING(URIN_QTY,37,60))) 
							,REMARK        =#{REMARK	  }
							,MOD_PGM_ID    =#{MOD_PGM_ID  }
							,MOD_USER      =#{MOD_USER    }
							,MOD_DT        =#{MOD_DT      }
							,MOD_DT_CURR   =#{MOD_DT_CURR }
							,MOD_DT_LOC    =#{MOD_DT_LOC  }
							,MOD_IP        =#{MOD_IP      }
			         WHERE 1=1
			           AND COMPANY_CD = #{COMPANY_CD}
					   AND EXC_DT     = #{EXC_DT}
					   AND RES_ID     = #{RES_ID}
    ]]>                                                                                                                                                                                                            
    </update>
    <!--DELECT  -->                                                                                                                                                                                                   
     <delete id="NUA310CT_DS_LIST_D" parameterType="java.util.HashMap">                                                                                         
    <![CDATA[                                                                                                                                                                                                      
	BEGIN NOT ATOMIC
           DELETE FROM T_NU_EXCRETION
                 WHERE COMPANY_CD = #{COMPANY_CD}
					   AND EXC_DT     = #{EXC_DT}
					   AND RES_ID     = #{RES_ID};
	END ;
    ]]>                                                                                                                                                                                                            
    </delete>

      <select id="NUA310CT_DS_LOCATION_TEMP_S" parameterType="java.util.HashMap" resultType="java.util.HashMap">                                                                                                           
     <![CDATA[
	            SELECT LOCATION AS CMCD
				      ,LOCATION AS CMNM
				  FROM T_NU_RESIDENT
				 WHERE COMPANY_CD = #{COMPANY_CD}
			  GROUP BY LOCATION  
     ]]>                                                                                                                                                                 
    </select>  
      <select id="NUA310CT_DS_ROOM_S" parameterType="java.util.HashMap" resultType="java.util.HashMap">                                                                                                           
     <![CDATA[
	            SELECT ROOM AS CMCD
				      ,ROOM AS CMNM
				  FROM T_NU_RESIDENT
				 WHERE COMPANY_CD = #{COMPANY_CD}
			  GROUP BY ROOM  
     ]]>                                                                                                                                                                 
    </select>
    <!-- 요양사 조회 -->    
     <select id="NUA310CT_DS_MANAGER_S" parameterType="java.util.HashMap" resultType="java.util.HashMap">                                                                                                           
     <![CDATA[
	            SELECT USER_ID AS CMCD
				      ,USER_NM_KOR AS CMNM
				  FROM T_CM_USER
				 WHERE COMPANY_CD = #{COMPANY_CD}
				   AND RANK_CD IN ('7','8')
				   AND USE_YN = 'Y'
     ]]>                                                                                                                                                                 
    </select>
    
    <!-- 층 조회 -->
    <select id="NUA310CT_DS_AREA_S" parameterType="java.util.HashMap" resultType="java.util.HashMap">                                                                                                           
    	<![CDATA[
			SELECT COMPANY_CD
			      ,ARE_CD
			      ,ARE_NM
			      ,ARE_TP
			      ,USE_YN
			FROM T_NU_AREA
			WHERE COMPANY_CD = #{COMPANY_CD}
			AND ARE_TP = '10'
    	]]>                
    </select>
    
    <!-- 생활실 조회 -->
    <select id="NUA310CT_DS_LOCATION_S" parameterType="java.util.HashMap" resultType="java.util.HashMap">                                                                                                           
    	<![CDATA[
			SELECT COMPANY_CD
			      ,LOC_SEQ
			      ,ARE_CD
			      ,LOC_CD
			      ,LOC_NM
			      ,LOC_TP
			      ,USE_YN
			FROM T_NU_LOCATION
			WHERE COMPANY_CD = #{COMPANY_CD}
			AND LOC_TP = '10'
    	]]>
    	<if test="AREA != '' and AREA != null">
			AND ARE_CD = #{AREA}
        </if> 
	</select>     
	<select id="NUA310CT_DS_MINUTE_S" parameterType="java.util.HashMap" resultType="java.util.HashMap">                                                                                                           
    	<![CDATA[
			SELECT CMCD
			      ,LEFT(CMNM,2) AS CMNM
			FROM T_CM_CODE
			WHERE COMPANY_CD = #{COMPANY_CD}
			AND GRP_CD = 'NU_MINUTE'
    	]]>                
    </select>
</mapper>                                                                                                                                                                                                          